jQuery(document).ready(function($){function isEmailValid(value){const EMAIL_REGEXP=/^(([^<>()[\].,;:\s@"]+(\.[^<>()[\].,;:\s@"]+)*)|(".+"))@(([^<>()[\].,;:\s@"]+\.)+[^<>()[\].,;:\s@"]{2,})$/iu;return EMAIL_REGEXP.test(value)}
$('.js-rating-wrapper .icon').hover(function(){var index=$('.js-rating-wrapper .icon').index(this);for(var i=0;i<=index;i++){$('.js-rating-wrapper .icon-'+i).addClass('active')}},function(){$('.js-rating-wrapper .icon').removeClass('active')});$(document).on('click','.js-rating-wrapper .icon',function(){$('.js-rating-wrapper .icon').removeClass('checked');var index=$('.js-rating-wrapper .icon').index(this);for(var i=0;i<=index;i++){$('.js-rating-wrapper .icon-'+i).addClass('checked')}
$('.acf-field[data-name="rating"] input').val(parseInt(index+1));let author_input_val=document.querySelector('#commentform #author').value;let email_input_val=document.querySelector('#commentform #email').value;let comment_input_val=document.querySelector('#commentform #comment').value;const submit_btn=document.querySelector('#commentform #submit');if($('.acf-field[data-name="rating"] input')[0].value>=1&&!isEmpty(author_input_val)&&isEmailValid(email_input_val)&&!isEmpty(comment_input_val)){submit_btn.disabled=!1}else{submit_btn.disabled=!0}
$('.wcl-rating-value').text($('.acf-field[data-name="rating"] input')[0].value)});$('.wcl-development-message .wcl-content-wrapper .close-btn').on('click',function(e){e.preventDefault();$('.wcl-development-message-wrapper.active').removeClass('active');$('html').css("overflow","auto")});if($('.wcl-toc-block').length&&!window.matchMedia('(max-width: 992px)').matches){wcl_sidebar_scroll_fixed();$(window).scroll(function(){wcl_sidebar_scroll_fixed()});$(window).resize(function(){wcl_sidebar_scroll_fixed()})}
function wcl_sidebar_scroll_fixed(){let contentWrap=$('.section-blog-single .content-wrap');let sidebarWrap=$('.section-blog-single .wcl-toc-block');let authorBoxWrap=$('.section-blog-single .author-box-wrap');let sidebarSpaceTop=50;let sidebarSpaceBottom=(sidebarWrap.data('bottom')?sidebarWrap.data('bottom'):0);let sidebarWrapHeight=sidebarWrap.height()+Number(sidebarWrap.css('padding-top').replace('px',''))+Number(sidebarWrap.css('padding-bottom').replace('px',''));let contentWrapHeight=$('.section-blog-single .content-wrap').height();let authorBoxWrapHeight=authorBoxWrap.height();let diffSidebarContentHeight=contentWrapHeight-sidebarWrapHeight-sidebarSpaceTop;let contentBottomPoint=Math.trunc(contentWrap.offset().top+contentWrap.outerHeight(!0)-Number(contentWrap.css('margin-top').replace('px','')));let contentWrapperOffset=$('.section-blog-single .content-wrap').offset().top;let windowScrollToTop=$(window).scrollTop();if(authorBoxWrap.length>0){contentWrapperOffset=contentWrapperOffset+authorBoxWrapHeight+25+sidebarSpaceTop}else{contentWrapperOffset=contentWrapperOffset-10}
if(windowScrollToTop>=contentWrapperOffset){sidebarWrap.removeClass('wcl-toc-block--static');sidebarWrap.addClass('wcl-toc-block--fixed')}else{sidebarWrap.addClass('wcl-toc-block--static');sidebarWrap.removeClass('wcl-toc-block--fixed')}
let fixedPoint=windowScrollToTop+(sidebarSpaceTop*2+sidebarWrapHeight);if(authorBoxWrap.length<1){fixedPoint=windowScrollToTop+(sidebarSpaceTop+10+sidebarWrapHeight)}
if(fixedPoint>=contentBottomPoint){sidebarWrap.addClass('wcl-toc-block--absolute');$('.wcl-toc-block.wcl-toc-block--fixed').css({top:diffSidebarContentHeight})}else{sidebarWrap.removeClass('wcl-toc-block--absolute');$('.wcl-toc-block.wcl-toc-block--fixed').css({top:''})}}
if($('.wcl-toc-block').length){var post_content_wrapper=$('.wcl-toc-block');toc_html='\
                <div class="data-wrapper">\
                <div class="data-notification">'+multilanguage_object['Jump to section']+'</div>\
                <div class="h3 data-title">'+multilanguage_object['Table of contents:']+'</div>\
                <ol class="toc-list">\
		';$('.wcl-page-content-wrapper h2').each(function(){var title_name=$(this).text();var title_id=title_name.trim().replace(/ /g,'-').toLowerCase();var content=$(this).nextUntil('h2').addBack();content.wrapAll('<div class="toc-section" id="'+title_id+'"></div>');if(title_id){toc_html+='<li><a href="#'+title_id+'">'+title_name+'</a></li>'}else{toc_html+='<li>'+title_name+'</li>'}});toc_html+='\
			</ol>\
		</div>\
	';post_content_wrapper.html(toc_html);$(window).scroll(function(){set_active_sidebar_link()});$(window).resize(function(){set_active_sidebar_link()})}
function set_active_sidebar_link(){$('body .toc-section').each(function(){if(isVisible($(this))){var page_section_id=$(this).attr('id');if(!$('.js-content-wrapper .wcl-toc-block a[href*="#'+page_section_id+'"]').hasClass('active')){$('.js-content-wrapper .wcl-toc-block a').removeClass('active');$('.js-content-wrapper .wcl-toc-block a[href*="#'+page_section_id+'"]').addClass('active')}
return!1}})}
function isVisible(element){var scroll_pos=$(window).scrollTop();var el_top=$(element).offset().top;var el_height=$(element).height();if((scroll_pos>el_top-20)&&(scroll_pos<el_top+el_height-20)){return!0}}(async()=>{const country_select=$('#best-time-country-select');if(country_select.length){let countries_list=await(await fetch('/wp-content/themes/views4you_theme/js/countries-list.json?ver=1.0')).json();let country_options_html='';countries_list.map((country_item,index)=>{if(index===0){country_options_html+='<option value="'+country_item.value+'" class="first-child">'+country_item.label+'</option>'}else{country_options_html+='<option value="'+country_item.value+'">'+country_item.label+'</option>'}});country_select.html(country_options_html);$('#best-time-country-select').selectpicker("refresh");const city_select=$('#best-time-city-select');city_select.prop('disabled',!0);$('#best-time-city-select').selectpicker("refresh");country_select.on('change',function(e){const httpRequest=new XMLHttpRequest();if(!httpRequest){alert('Giving up :( Cannot create an XMLHTTP instance');return!1}
httpRequest.open('POST','/wp-admin/admin-ajax.php');httpRequest.setRequestHeader('Content-Type','application/x-www-form-urlencoded; charset=UTF-8');httpRequest.onload=()=>{if(httpRequest.status>=200&&httpRequest.status<300){$('#best-time-city-select').selectpicker('destroy');city_select.html(httpRequest.responseText);city_select.prop('disabled',!1);$('#best-time-city-select').selectpicker();$('.wcl-best-time-post-video .data-submit .btn').removeClass('disabled')}else{$('.wcl-best-time-video-pblish-error').text(multilanguage_object['Something went wrong. Please, try again later']).addClass('active')}};httpRequest.onerror=function(){$('.wcl-best-time-video-pblish-error').text(multilanguage_object['Something went wrong. Please, try again later']).addClass('active')};httpRequest.send('action=ajax_load_cities_of_country&country='+country_select.val())});city_select.on('change',function(){if($(this).val()){best_times_calc_btn.classList.remove('disabled')}else{best_times_calc_btn.classList.add('disabled')}})}})();const best_times_calc=document.querySelector('.wcl-best-time-post-video');const best_times_calc_btn=document.querySelector('.wcl-best-time-post-video .data-submit .btn');if(best_times_calc){const show_plan_time=()=>{const preloader=document.querySelector('.wcl-best-time-post-video .wcl-preloader');const time_plan=document.querySelector('.wcl-best-time-post-video .data-time-plan');best_times_calc_btn.classList.add('disabled');preloader.style.display='flex';time_plan.classList.remove('show');const httpRequest=new XMLHttpRequest();if(!httpRequest){videoAnalyticsSubmitButton.classList.remove('disable');alert('Giving up :( Cannot create an XMLHTTP instance');return!1}
httpRequest.open('POST','/wp-admin/admin-ajax.php');httpRequest.setRequestHeader('Content-Type','application/x-www-form-urlencoded; charset=UTF-8');httpRequest.onload=()=>{if(httpRequest.status>=200&&httpRequest.status<300){let response=JSON.parse(httpRequest.responseText);best_times_calc_btn.classList.remove('disabled');preloader.style.display='none';let select_country=document.getElementById('best-time-country-select').value;let select_city=document.getElementById('best-time-city-select').value;let select_country_full_name=document.querySelector('#best-time-country-select option[value="'+select_country+'"]').textContent;if(response.city===null&&response.country===null&&response.timezone===null){document.querySelector('.wcl-best-time-post-video .user-curent-location').innerText=multilanguage_object['The location is not defined'];document.querySelector('.wcl-best-time-post-video .user-largest-location').innerText=`${select_city}, ${select_country_full_name}`;document.querySelector('.wcl-best-time-post-video .user-timezone').innerText=multilanguage_object['The timezone is not defined']}else{document.querySelector('.wcl-best-time-post-video .user-curent-location').innerText=`${response.city}, ${response.country}`;document.querySelector('.wcl-best-time-post-video .user-largest-location').innerText=`${select_city}, ${select_country}`;document.querySelector('.wcl-best-time-post-video .user-timezone').innerText=`${response.timezone}`}
time_plan.classList.add('show')}else{best_times_calc_btn.classList.remove('disabled');preloader.style.display='none';let select_country=document.getElementById('best-time-country-select').value;let select_city=document.getElementById('best-time-city-select').value;document.querySelector('.wcl-best-time-post-video .user-curent-location').innerText=multilanguage_object['The location is not defined'];document.querySelector('.wcl-best-time-post-video .user-largest-location').innerText=`${select_city}, ${select_country}`;document.querySelector('.wcl-best-time-post-video .user-timezone').innerText=multilanguage_object['The timezone is not defined'];time_plan.classList.add('show')}};httpRequest.onerror=function(){best_times_calc_btn.classList.remove('disabled');preloader.style.display='none';let select_country=document.getElementById('best-time-country-select').value;let select_city=document.getElementById('best-time-city-select').value;document.querySelector('.wcl-best-time-post-video .user-curent-location').innerText=multilanguage_object['The location is not defined'];document.querySelector('.wcl-best-time-post-video .user-largest-location').innerText=`${select_city}, ${select_country}`;document.querySelector('.wcl-best-time-post-video .user-timezone').innerText=multilanguage_object['The timezone is not defined'];time_plan.classList.add('show')};httpRequest.send('action=ajax_get_users_location')}
best_times_calc_btn.addEventListener('click',e=>{e.preventDefault();show_plan_time()})}
const buy_product_select=$('.wcl-buy-product-select');if(buy_product_select.length){buy_product_select.selectpicker()}
const buy_product_country_select=$('.wcl-buy-product-country-select');if(buy_product_country_select.length){buy_product_country_select.selectpicker()}
const viewing_time_select=$('.wcl-viewing-time-select');if(viewing_time_select.length){viewing_time_select.selectpicker()}
if(!window.matchMedia('(max-width: 1023px)').matches){let toolsMenuItem=$('.header .menu-list .tools-menu-item');toolsMenuItem.hover(function(){const containerWidth=$(this).closest('.container').css('width');$(this).css('position','static');$(this).find('.sub-menu-wrapper').css({'width':'100%','max-width':containerWidth})},function(){$(this).removeAttr('style');$(this).find('.sub-menu-wrapper').removeAttr('style')})}});function createCookie(name,value,days){if(days){var date=new Date();date.setTime(date.getTime()+(days*24*60*60*1000));var expires="; expires="+date.toGMTString()}else var expires="";document.cookie=name+"="+value+expires+"; path=/"}
function readCookie(name){var nameEQ=name+"=";var ca=document.cookie.split(';');for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==' ')c=c.substring(1,c.length);if(c.indexOf(nameEQ)==0)return c.substring(nameEQ.length,c.length)}
return null}
function addToCookieArray(cookieName,newValue){var cookieValue=readCookie(cookieName);var myArray;if(cookieValue){myArray=JSON.parse(cookieValue)}else{myArray=[]}
myArray.push(newValue);createCookie(cookieName,JSON.stringify(myArray),7)}
function eraseCookie(name){createCookie(name,"",-1)}
const body=document.body;let disableScroll=function(){let paddingOffset=window.innerWidth-document.body.offsetWidth+'px';let pagePosition=window.scrollY;body.style.paddingRight=paddingOffset;body.classList.add('disable-scroll');body.dataset.position=pagePosition;body.style.top=-pagePosition+'px'}
let enableScroll=function(){let pagePosition=parseInt(document.body.dataset.position,10);body.style.top='auto';body.classList.remove('disable-scroll');body.style.paddingRight='0px';window.scroll({top:pagePosition,left:0});body.removeAttribute('data-position')}
function validateEmail(value){const emailRegex=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return emailRegex.test(value)}
const ready=(callback)=>{if(document.readyState!="loading")callback();else document.addEventListener("DOMContentLoaded",callback)}
ready(()=>{if(document.querySelector('.wcl-anonymous-instagram-info-section')){AnonymousViewsInstagram()}
addBlockImageBanner();function clickToCopy(){const links=document.querySelectorAll('.copy-click');const cls={copied:'is-copied',hover:'is-hovered'}
const copyToClipboard=str=>{const el=document.createElement('input');str.dataset.copyString?el.value=str.dataset.copyString:el.value=str.text;el.setAttribute('readonly','');el.style.position='absolute';el.style.opacity=0;document.body.appendChild(el);el.select();document.execCommand('copy');document.body.removeChild(el)}
const clickInteraction=(e)=>{e.preventDefault();copyToClipboard(e.target);e.target.classList.add(cls.copied);setTimeout(()=>e.target.classList.remove(cls.copied),1000);setTimeout(()=>e.target.classList.remove(cls.hover),700)}
Array.from(links).forEach(link=>{link.addEventListener('click',e=>clickInteraction(e));link.addEventListener('keypress',e=>{if(e.keyCode===13)clickInteraction(e)});link.addEventListener('mouseover',e=>e.target.classList.add(cls.hover));link.addEventListener('mouseleave',e=>{if(!e.target.classList.contains(cls.copied)){e.target.classList.remove(cls.hover)}})})}
function addBlockImageBanner(){var sectionCounters=document.querySelector(".section-counters");var sectionBanner=document.querySelector('.section-banner');if(sectionBanner){sectionBanner.classList.add('mobile')}
var newSection=document.createElement("div");newSection.classList.add('section-banner-mobile');newSection.classList.add('section-banner');if(sectionCounters){newSection.innerHTML=document.querySelector(".section-banner").innerHTML;var blockToRemove=newSection.querySelector(".col-content");if(blockToRemove){blockToRemove.parentNode.removeChild(blockToRemove)}
sectionCounters.parentNode.insertBefore(newSection,sectionCounters)}}
function truncateString(str,num){return str.length>num?str.slice(0,num)+'...':str}
function sleep(time){return new Promise(resolve=>{setTimeout(()=>{resolve()},time)})}
async function loadScript(src,wait=!1){var head=document.getElementsByTagName('head')[0]
var script=document.createElement('script')
script.type='text/javascript';script.src=src;head.appendChild(script);if(wait){await sleep(wait)}}
async function loadCaptcha(){await loadScript(`https://www.google.com/recaptcha/api.js?render=${Views4YouConfig.recaptcha_key}`);do{await sleep(100)}while(typeof grecaptcha==="undefined");}
function SendRequest(action,args=''){return new Promise(async(resolve,reject)=>{await loadCaptcha();if(typeof grecaptcha==="undefined"){return}
grecaptcha.ready(function(){grecaptcha.execute(Views4YouConfig.recaptcha_key,{action:'views4you_grecaptcha'}).then(function(token){const httpRequest=new XMLHttpRequest();if(!httpRequest){reject('Giving up :( Cannot create an XMLHTTP instance')}
httpRequest.open('POST','/wp-admin/admin-ajax.php');httpRequest.setRequestHeader('Content-Type','application/x-www-form-urlencoded; charset=UTF-8');httpRequest.onload=()=>{if(httpRequest.status>=200&&httpRequest.status<300){resolve(httpRequest.responseText)}else{reject(httpRequest.statusText)}}
httpRequest.onerror=function(){reject(httpRequest.statusText)};httpRequest.send(`action=${action}&token=${token}${args}`)})})})}
const apple_pay_button=document.querySelector('.btn-apple');var apple_temp_messages=document.querySelector('.apple-temp-messages');if(apple_pay_button){apple_pay_button.addEventListener('click',function(){console.log('start');apple_temp_messages.innerHTML+='<p>Start apple session</p>';var appleSession=new ApplePaySession(6,{"countryCode":"US","currencyCode":Views4YouConfig.money_currency,"merchantCapabilities":["supports3DS"],"supportedNetworks":["visa","masterCard","amex","discover"],"total":{"label":"Demo (Card is not charged)","amount":"0.01"}});appleSession.begin();appleSession.onvalidatemerchant=event=>{console.log(event.validationURL)
apple_temp_messages.innerHTML+='<p>Merchant is valid. URL - '+event.validationURL+'</p>';const request_args=`&url=${event.validationURL}`;SendRequest('apple_payment',request_args).then(function(res){const response=JSON.parse(res);console.log(response);if(response.error){console.error(response.error);apple_temp_messages.innerHTML+='<p>Error: '+response.error+'</p>'}else{console.log(response);apple_temp_messages.innerHTML+='<p>Response: '+JSON.stringify(response)+'</p>'}}).catch(function(err){console.log(err);apple_temp_messages.innerHTML+='<p>Error: '+err.toString()+'</p>'})}})}
function AnonymousViewsInstagram(){const box=document.querySelector('.wcl-anonymous-instagram-info-section');const boxPostsInst=box.querySelector('.box-posts-inst');const search_buttons=box.querySelectorAll('.js-ig-button-search');const wpnonce=box.querySelector('#wcl_instagram_info_anonimus_wpnonce');const valueInput=box.querySelector('.search-ig-username');const boxError=box.querySelector('.box-error');const boxErrorTwo=box.querySelector('.box-error-two');const boxPostsList=box.querySelector('.box-posts-list');const loadMoreBox=box.querySelector('.js-box-load-more');const boxAuthor=box.querySelector('.box-author');const authorName=boxAuthor.querySelector('.author-name');const authorImg=boxAuthor.querySelector('.author-img');let isRequestInProgress=!1;if(box){box.addEventListener('click',async function(event){let search_button_item=event.target.closest('.js-ig-button-search');if(search_button_item){event.preventDefault();let search_ig_username=valueInput.value;if(search_ig_username.startsWith('@')){search_ig_username=search_ig_username.slice(1);valueInput.value=search_ig_username}
if(search_ig_username){if(isRequestInProgress){return}
isRequestInProgress=!0;if(search_button_item.classList.contains("highlights-item")){boxPostsInst.classList.add('highlights-posts-loading')}else{if(document.querySelector('.highlights-list')&&!search_button_item.classList.contains('js-ig-button-load-more')){document.querySelector('.highlights-list').remove()}}
boxPostsInst.classList.add('disabled');boxPostsInst.classList.remove('success','failure');boxError.classList.add('disabled');boxErrorTwo.classList.add('disabled');loadMoreBox.classList.add('disabled');if(search_button_item.classList.contains('cat')||search_button_item.classList.contains('highlights-item')){loadMoreBox.querySelector('.js-ig-button-load-more').setAttribute('data-cat',search_button_item.getAttribute('data-cat'))}
if(search_button_item.classList.contains('highlights-item')){loadMoreBox.querySelector('.js-ig-button-load-more').setAttribute('data-id',search_button_item.getAttribute('data-id'))}
let data_cat=search_button_item.getAttribute('data-cat');if(!search_button_item.classList.contains("active")&&!search_button_item.classList.contains("highlights-item")&&!search_button_item.classList.contains("js-ig-button-load-more")){search_buttons.forEach((search_button)=>{search_button.classList.remove("active")});search_button_item.classList.add("active")}
if(data_cat!=='pfp'){boxAuthor.classList.remove('active')}
if(boxAuthor.querySelector('.box-button')){boxAuthor.querySelector('.box-button').remove()}
let cookie=getCookieApiInst();let userName;let idUser;if(cookie){userName=cookie.username;idUser=cookie.id}
if(search_ig_username.indexOf(userName)==-1){clearCookieApiInst();userName=null;idUser=null}
boxPostsList.classList.remove('post','stories','highlights','pfp','highlites-post');boxPostsList.classList.add(data_cat);let request_args=`&wpnonce=${wpnonce.value}&username=${search_ig_username}&data-cat=${data_cat}`;if(idUser){request_args+=`&id-user=${idUser}`}
const endCursor=boxPostsList.getAttribute('data-end-cursor');if(endCursor&&search_button_item.classList.contains('js-ig-button-load-more')){request_args+=`&data-cursor=${endCursor}`}else{boxPostsList.innerHTML=''}
const data_id=search_button_item.getAttribute('data-id');if(data_id){request_args+=`&id=${data_id}`}
console.log('Send AJAX');SendRequest('get_instagram_data',request_args).then(function(res){isRequestInProgress=!1;console.log('AJAX SUCCESS');const response=JSON.parse(res);boxPostsInst.classList.remove('disabled');if(response.error=='1'){boxErrorTwo.classList.remove('disabled');boxErrorTwo.innerHTML=response.message;return}
if(Object.keys(response.user_info).length!==0){let is_need_render=0;if(search_ig_username.indexOf(userName)==-1||!authorImg.getAttribute('src')){is_need_render=1}
renderUser(response.user_info.username,response.user_info.profile_pic_url_hd,response.user_info.profile_pic_url,data_cat,is_need_render)}
if(data_cat=='pfp'&&response.user_info.username===null){boxPostsList.innerHTML='<h2>'+multilanguage_object['No Profile picture']+'</h2>';boxPostsInst.classList.remove('success');boxPostsInst.classList.add('failure')}
if(!response.body.length){if(data_cat=='post'){boxPostsList.insertAdjacentHTML('beforeend','<h2>'+multilanguage_object['No Posts']+'</h2>');boxPostsList.setAttribute('data-end-cursor','')}else if(data_cat=='stories'){boxPostsList.innerHTML='<h2>'+multilanguage_object['No Stories']+'</h2>'}else if(data_cat=='highlights'||data_cat=='highlites-post'){boxPostsList.innerHTML='<h2>'+multilanguage_object['No Highlights']+'</h2>'}
boxPostsInst.classList.remove('success');boxPostsInst.classList.add('failure');return}else{boxPostsInst.classList.add('success');if(data_cat=='highlights'){renderHighlightsList(response.body)}else if(data_cat!='pfp'){renderPost(response.body)}
if(response.end_cursor){boxPostsList.setAttribute("data-end-cursor",response.end_cursor);loadMoreBox.classList.remove('disabled')}else{boxPostsList.setAttribute("data-end-cursor",'');loadMoreBox.classList.add('disabled')}}}).catch(function(err){isRequestInProgress=!1;boxPostsInst.classList.remove('disabled');boxPostsInst.classList.add('failure')
console.log(err)})}else{boxError.classList.remove('disabled')
return}}
let ig_upload_video_click=event.target.closest('.js-ig-upload-video');if(ig_upload_video_click){event.preventDefault();let data_url=ig_upload_video_click.getAttribute('data-url');ig_upload_video_click.classList.remove('js-ig-upload-video');if(data_url){let imgElem=ig_upload_video_click.querySelector('img');if(imgElem){imgElem.style.display='none'}
ig_upload_video_click.classList.add('skeleton');console.log('add skeleton class');try{let videoResponse=await ig_upload_video_to_cdn(data_url);console.log(videoResponse);const videoElem=document.createElement('video');videoElem.setAttribute('controls','');videoElem.setAttribute('autoplay','');videoElem.setAttribute('loop','');videoElem.setAttribute('muted','');videoElem.setAttribute('playsinline','');videoElem.setAttribute('src',videoResponse);videoElem.addEventListener('loadeddata',function(){if(imgElem){ig_upload_video_click.removeChild(imgElem)}
ig_upload_video_click.classList.remove('skeleton')});ig_upload_video_click.appendChild(videoElem);ig_upload_video_click.classList.remove('ig-video-type');let buttonWrapper=ig_upload_video_click.nextElementSibling;if(buttonWrapper&&buttonWrapper.classList.contains('box-button')){let downloadLink=buttonWrapper.querySelector('.js-btn-download-video');if(downloadLink){downloadLink.href=videoResponse}}}catch(error){console.error("Error uploading the video: ",error)}}}
let button_download_video=event.target.closest('.js-btn-download-video');if(button_download_video){event.preventDefault();console.log('click');let hrefValue=button_download_video.getAttribute('href');let blob_value=hrefValue;if(hrefValue){let url=new URL(hrefValue);if(url.origin==="https://media-cdn.views4you.com"){fetch(hrefValue).then(video_blob=>video_blob.blob()).then(blob=>{const reader=new FileReader();reader.onload=()=>{const base64Data=reader.result.split(',')[1];const currentDate=new Date();const fileName=`${currentDate.getTime()}.mp4`;blob_value=`data:${blob.type};base64,${base64Data}`;button_download_video.href=blob_value;button_download_video.download=fileName;let a=document.createElement('a');a.href=blob_value;a.download=fileName;document.body.appendChild(a);a.click();document.body.removeChild(a)};reader.readAsDataURL(blob)})}else if(hrefValue.startsWith('data:video/')){let a=document.createElement('a');a.href=blob_value;a.download=`${currentDate.getTime()}.mp4`;document.body.appendChild(a);a.click();document.body.removeChild(a)}}else{let boxItem=event.target.closest('.box-item');let boxImg=boxItem.querySelector('.box-img');let videoElement=boxItem.querySelector('.ig-video-type');let imgElem=boxItem.querySelector('img');let data_url=videoElement.getAttribute('data-url');try{let videoResponse=await ig_upload_video_to_cdn(data_url);console.log(videoResponse);const videoElem=document.createElement('video');videoElem.setAttribute('src',videoResponse);videoElem.setAttribute('controls','');videoElem.setAttribute('autoplay','');boxImg.classList.add('skeleton');boxImg.prepend(videoElem);if(imgElem){imgElem.remove()}
videoElem.addEventListener('loadeddata',function(){boxItem.classList.remove('skeleton')});boxImg.classList.remove('ig-video-type');button_download_video.href=videoResponse;fetch(videoResponse).then(video_blob=>video_blob.blob()).then(blob=>{const reader=new FileReader();reader.onload=()=>{const base64Data=reader.result.split(',')[1];const currentDate=new Date();const fileName=`${currentDate.getTime()}.mp4`;blob_value=`data:${blob.type};base64,${base64Data}`;button_download_video.href=blob_value;button_download_video.download=fileName;let a=document.createElement('a');a.href=blob_value;a.download=fileName;document.body.appendChild(a);a.click();document.body.removeChild(a)};reader.readAsDataURL(blob)})}catch(error){console.error("Error uploading the video: ",error)}}}
let button_download=event.target.closest('.js-btn-download-img');if(button_download){event.preventDefault();let imageUrl=button_download.getAttribute('href');fetch(imageUrl).then(response=>response.blob()).then(blob=>{let blobUrl=URL.createObjectURL(blob);let tempLink=document.createElement('a');tempLink.href=blobUrl;tempLink.setAttribute('download','instagram-image.jpg');tempLink.click();URL.revokeObjectURL(blobUrl)}).catch(error=>{console.error("There was an error fetching the image for download:",error)})}})}
function ig_upload_video_to_cdn(video_url){return new Promise((resolve,reject)=>{let request_args=`&video_url=${encodeURIComponent(video_url)}`;SendRequest('ig_upload_video',request_args).then(function(res){let parsedResponse=JSON.parse(res);if(parsedResponse.error=='0'){resolve(parsedResponse.body)}else{reject('Error from server.')}}).catch(function(err){console.log(err);reject(err)})})}
window.addEventListener('load',()=>{loadPage()});function renderPost(obj){obj.forEach(media=>{const boxItem=document.createElement('div');boxItem.className='box-item';const boxImg=document.createElement('div');boxImg.className='box-img';if(media.video_url){boxImg.setAttribute("data-url",media.video_url);boxImg.classList.add('ig-video-type');boxImg.classList.add('js-ig-upload-video')}
boxImg.classList.add('skeleton');let mediaElement=Object.assign(new Image(),{src:media.image,alt:'Instagram Image'});mediaElement.onload=function(){console.log('on load skeleton')
boxImg.classList.remove('skeleton')};boxImg.appendChild(mediaElement);boxItem.prepend(boxImg);boxPostsList.appendChild(boxItem)})}
function renderUser(name,imgHd,img,data_cat,is_need_render){if(name){if(is_need_render){boxAuthor.classList.add('box-author--visible');authorName.innerHTML=name;if(imgHd){authorImg.src=imgHd}else{authorImg.src=img}}}}
function renderHighlightsList(obj){console.log('render highlights');var highlightsDiv=document.createElement('div');highlightsDiv.className='highlights-list';if(boxAuthor){boxAuthor.parentNode.insertBefore(highlightsDiv,boxAuthor.nextSibling)}
obj.forEach(item=>{const box=document.createElement("div");box.classList.add('list-item','highlights-item','js-ig-button-search');box.setAttribute('data-id',item.id);box.setAttribute("data-cat",'highlites-post');const boxImgDiv=document.createElement("div");boxImgDiv.classList.add('box-img','skeleton');let mediaElement=Object.assign(new Image(),{src:item.image,alt:''});mediaElement.onload=function(){console.log('on load skeleton')
boxImgDiv.classList.remove('skeleton')};boxImgDiv.appendChild(mediaElement);const titleSpan=document.createElement("span");titleSpan.classList.add('title-item');titleSpan.textContent=item.title;box.appendChild(boxImgDiv);box.appendChild(titleSpan);highlightsDiv.appendChild(box)})}
function loadPage(){var searchParams=new URLSearchParams(window.location.search);var dataCat=searchParams.get('dataCat');var value=searchParams.get('username');if(dataCat&&value){loadPost(value,dataCat)}}
function getCookieApiInst(){var cookieValue=document.cookie.split('; ').find(row=>row.startsWith('instagram_api='));var data=null;if(cookieValue){var valueParts=cookieValue.split('=');if(valueParts.length===2){try{data=JSON.parse(decodeURIComponent(valueParts[1]))}catch(error){console.error('Error JSON:',error)}}}
return data}
function clearCookieApiInst(){var cookieName='instagram_api';document.cookie=cookieName+'=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;'}}
function YouTubeSubtitlesDownloaderRequest(link_type,channel_url){return new Promise(async(resolve,reject)=>{await loadCaptcha();if(typeof grecaptcha==="undefined"){return}
grecaptcha.ready(function(){grecaptcha.execute(Views4YouConfig.recaptcha_key,{action:'youtube_subtitle_downloader'}).then(function(token){let wcl_youtube_subtitle_downloader_wpnonce=document.querySelector('#wcl_youtube_subtitle_downloader_wpnonce').value;const httpRequest=new XMLHttpRequest();if(!httpRequest){downloader_search_form_submit_button.classList.remove('disable');alert('Giving up :( Cannot create an XMLHTTP instance');return!1}
httpRequest.open('POST','/wp-admin/admin-ajax.php');httpRequest.setRequestHeader('Content-Type','application/x-www-form-urlencoded; charset=UTF-8');httpRequest.onload=()=>{if(httpRequest.status>=200&&httpRequest.status<300){let response=JSON.parse(httpRequest.responseText);resolve(response)}else{reject(httpRequest.reject)}};httpRequest.onerror=function(){};httpRequest.send('action=ajax_youtube_subtitle_downloader&token='+token+'&wcl_youtube_subtitle_downloader_wpnonce='+wcl_youtube_subtitle_downloader_wpnonce+'&link_type='+link_type+'&channel_url='+channel_url)})})})}
function YouTubeRankTrackerRequest(search_term,region,url){return new Promise(async(resolve,reject)=>{if(typeof ApexCharts==="undefined"){await loadStyle(`${Views4YouConfig.template_path}/js/apexcharts/apexcharts.css?v=${Views4YouConfig.template_version}`);await loadScript(`${Views4YouConfig.template_path}/js/apexcharts/apexcharts.min.js?v=${Views4YouConfig.template_version}`);do{await sleep(1)}while(typeof ApexCharts==="undefined");}
await loadCaptcha();if(typeof grecaptcha==="undefined"){return}
grecaptcha.ready(function(){grecaptcha.execute(Views4YouConfig.recaptcha_key,{action:'youtube_rank_tracker'}).then(function(token){let wcl_youtube_rank_tracker_wpnonce=document.querySelector('#wcl_youtube_rank_tracker_wpnonce').value;const httpRequest=new XMLHttpRequest();if(!httpRequest){downloader_search_form_submit_button.classList.remove('disable');alert('Giving up :( Cannot create an XMLHTTP instance');return!1}
httpRequest.open('POST','/wp-admin/admin-ajax.php');httpRequest.setRequestHeader('Content-Type','application/x-www-form-urlencoded; charset=UTF-8');httpRequest.onload=()=>{if(httpRequest.status>=200&&httpRequest.status<300){let response=JSON.parse(httpRequest.responseText);resolve(response)}else{reject(httpRequest.reject)}};httpRequest.onerror=function(){};httpRequest.send('action=ajax_youtube_rank_tracker&token='+token+'&wcl_youtube_rank_tracker_wpnonce='+wcl_youtube_rank_tracker_wpnonce+'&search_term='+search_term+'&region='+region+'&url='+url)})})})}
const moneyCalculatorSubmitButton=document.querySelector('.wcl-section-calculator .search-form button[type=submit]');if(moneyCalculatorSubmitButton){const calculatorSection=moneyCalculatorSubmitButton.closest('.wcl-section-calculator');const calculatorForm=calculatorSection.querySelector('.wcl-form');const contentWrapper=calculatorSection.querySelector('.channel-box');const wpnonce=calculatorForm.querySelector('#wcl_load_youtube_channel_information_wpnonce');const message=calculatorSection.querySelector('.wcl-message');const preloader=calculatorSection.querySelector('.wcl-preloader');const preloaderText=preloader.querySelector('.wcl-preloader-text');jQuery(function($){$("#range-slider-views").slider({value:51000,min:0,max:150000,step:1000,range:"min",slide:function(event,ui){let currentViews=ui.value;let crmValue=parseFloat($(".js-crm").val().replace('$',''));let newViewsPerMonth=currentViews*30;let newViewsPerYear=currentViews*365;let newEstimateDay=currentViews/1000*crmValue;let newEstimateMonth=newEstimateDay*30;let newEstimateYear=newEstimateDay*365;$("#amount-views").val(ui.value);$('.estimate-day .number').text('$'+numberMask(parseInt(newEstimateDay)));$('.estimate-month .number').text('$'+numberMask(parseInt(newEstimateMonth)));$('.estimate-year .number').text('$'+numberMask(parseInt(newEstimateYear)));$('.wcl-views-per-month').text(numberMask(newViewsPerMonth));$('.wcl-views-per-year').text(numberMask(newViewsPerYear))}});$("#amount-views").val($("#range-slider-views").slider("value"))});jQuery(function($){$("#range-slider-crm").slider({value:7.34,min:0,max:20,step:0.01,range:"min",slide:function(event,ui){let currentViews=parseInt($(".js-day-views").val());let crmValue=ui.value;let newEstimateDay=currentViews/1000*crmValue;let newEstimateMonth=newEstimateDay*30;let newEstimateYear=newEstimateDay*365;$("#amount-crm").val(ui.value);$('.estimate-day .number').text('$'+numberMask(parseInt(newEstimateDay)));$('.estimate-month .number').text('$'+numberMask(parseInt(newEstimateMonth)));$('.estimate-year .number').text('$'+numberMask(parseInt(newEstimateYear)))}});$("#amount-crm").val("$"+$("#range-slider-crm").slider("value"))});moneyCalculatorSubmitButton.addEventListener('click',async(e)=>{e.preventDefault();moneyCalculatorSubmitButton.classList.add('disable');message.classList.remove('show','error','success');contentWrapper.style.display='none';contentWrapper.querySelector('.channel-avatar img').innerHTML='<img src=\'\' />';let channelUrl=calculatorSection.querySelector('.form-control').value;if(isEmpty(channelUrl)){contentWrapper.style.display='none';message.innerHTML=multilanguage_object['Empty URL. Please, fill URL input and click on the "Search" button again'];message.classList.add('show','error');return!1}
const state='';const title='';const url=`?url=${encodeURIComponent(channelUrl)}`;history.pushState(state,title,url);let page_title=calculatorSection.querySelector('.wcl-channel-share').dataset.page;let current_website_link=encodeURIComponent(document.location.href);let share_twitter=calculatorSection.querySelector('.wcl-channel-share-twitter');share_twitter.href=`http://twitter.com/share?text=${page_title}&url=${current_website_link}`;let share_facebook=calculatorSection.querySelector('.wcl-channel-share-facebook');share_facebook.href=`https://www.facebook.com/sharer/sharer.php?u=${current_website_link}`;let share_linkedin=calculatorSection.querySelector('.wcl-channel-share-linkedin');share_linkedin.href=`https://www.linkedin.com/sharing/share-offsite/?url=${current_website_link}`;calculatorForm.classList.add('loading');preloader.classList.add('loading');const request_args=`&wpnonce=${wpnonce.value}&channel_url=${channelUrl}`;SendRequest('ajax_load_youtube_channel_information',request_args).then(function(res){let response=JSON.parse(res);if(response.success=='1'){setTimeout(()=>{preloaderText.innerHTML=multilanguage_object['We estimate the CPM of the channel based on its target audience.'];setTimeout(()=>{preloaderText.innerHTML=multilanguage_object['We analyze the view counts of the channel.'];setTimeout(()=>{preloaderText.innerHTML=multilanguage_object['And now the results are ready.'];setTimeout(()=>{preloaderText.innerHTML=multilanguage_object['We locate the country of the channel.'];calculatorForm.classList.remove('loading');preloader.classList.remove('loading');const data=JSON.parse(response.data);let subscribers=data.subscribers;let views=data.views;let channelImage=data.channel_image;let channelName=data.channel_name;let locationName=data.location_name;let locationCode=data.location_code;let createdDate=data.front_date;let monthDiff=data.month_diff;(async()=>{let crmList=await(await fetch('/wp-content/themes/views4you_theme/js/crm.json')).json();if(crmList[locationCode]){let locationRate=parseFloat(crmList[locationCode].replace('$',''));jQuery("#range-slider-views").slider({value:0,min:0,max:150000,step:1000,range:"min",});jQuery("#range-slider-crm").slider({value:locationRate,min:0,max:20,step:0.01,range:"min",});jQuery("#amount-views").val(jQuery("#range-slider-views").slider("value"));let currentViews=parseInt(jQuery(".js-day-views").val());let newMonthlyEarnings=views/1000*locationRate/(monthDiff>18?monthDiff-18:monthDiff);let newSponsorshipsPrice=subscribers/100;let newViewsPerMonth=currentViews*30;let newViewsPerYear=currentViews*365;let newEstimateDay=currentViews/1000*parseInt(locationRate);let newEstimateMonth=newEstimateDay*30;let newEstimateYear=newEstimateDay*365;jQuery('.channel-box .wcl-monthly-earnings .number').text('$'+numberMask(Math.round(newMonthlyEarnings)));jQuery('.channel-box .wcl-monthly-earnings .cpm').text('CPM: $'+numberMask(locationRate));jQuery('.channel-box .wcl-sponsorships-price .number').text('$'+numberMask(newSponsorshipsPrice));jQuery('.channel-box .wcl-sponsorships-price .cpm').text('CPM: $'+numberMask(locationRate));jQuery('.wcl-views-per-month').text(numberMask(newViewsPerMonth));jQuery('.wcl-views-per-year').text(numberMask(newViewsPerYear));jQuery('.estimate-day .number').text('$'+numberMask(parseInt(newEstimateDay)));jQuery('.estimate-month .number').text('$'+numberMask(parseInt(newEstimateMonth)));jQuery('.estimate-year .number').text('$'+numberMask(parseInt(newEstimateYear)));jQuery("#amount-crm").val("$"+jQuery("#range-slider-crm").slider("value"))}else{jQuery("#range-slider-views").slider({value:0,min:0,max:150000,step:1000,range:"min",});jQuery("#range-slider-crm").slider({value:0,min:0,max:20,step:0.01,range:"min",});jQuery('.channel-box .wcl-monthly-earnings .number').text('$'+0);jQuery('.channel-box .wcl-monthly-earnings .cpm').text(multilanguage_object['CPM: undefined']);jQuery('.channel-box .wcl-sponsorships-price .number').text('$'+0);jQuery('.channel-box .wcl-sponsorships-price .cpm').text(multilanguage_object['CPM: undefined']);jQuery("#amount-views").val(jQuery("#range-slider-views").slider("value"));jQuery("#amount-crm").val("$"+jQuery("#range-slider-crm").slider("value"));jQuery('.wcl-views-per-month').text(0);jQuery('.wcl-views-per-year').text(0);jQuery('.estimate-day .number').text('$'+0);jQuery('.estimate-month .number').text('$'+0);jQuery('.estimate-year .number').text('$'+0);message.innerHTML=multilanguage_object['Can\'t recognize CPM for this channel. Please use manual calculator below'];message.style.display="block"}})();document.querySelector('.channel-box .channel-avatar img').src=channelImage;document.querySelector('.channel-box .wcl-subscribers .number').innerHTML=numberMask(subscribers);document.querySelector('.channel-box .wcl-views .number').innerHTML=numberMask(views);document.querySelector('.channel-box .wcl-data-name').innerHTML=channelName;document.querySelector('.channel-box .wcl-creation-date .number').innerHTML=createdDate;document.querySelector('.channel-box .wcl-country .number').innerHTML=locationName;contentWrapper.style.display="block";moneyCalculatorSubmitButton.classList.remove('disable')},2000)},2000)},2000)},2000)}else{message.innerHTML=response.message?response.message:multilanguage_object['Something went wrong. Please, <a href="%1$s">contact us</a> or try again later'];message.style.display="block";message.classList.add('show','error');contentWrapper.style.display="none";moneyCalculatorSubmitButton.classList.remove('disable');calculatorForm.classList.remove('loading');preloader.classList.remove('loading')}}).catch(function(err){calculatorForm.classList.remove('loading');preloader.classList.remove('loading');message.innerHTML=err?err:multilanguage_object['Something went wrong. Please, <a href="%1$s">contact us</a> or try again later'];message.classList.add('show','error')})});if(document.querySelector('.form-control').value!=0){moneyCalculatorSubmitButton.click()}}
const thumbnail_downloader_search_form_submit_button=document.querySelector('.section-thumbnail-downloader .search-form button[type=submit]');if(thumbnail_downloader_search_form_submit_button){const thumbnail_downloader_section=thumbnail_downloader_search_form_submit_button.closest('.section-thumbnail-downloader');const form=thumbnail_downloader_section.querySelector('.wcl-form');const message=thumbnail_downloader_section.querySelector('.wcl-message ');const preloader=thumbnail_downloader_section.querySelector('.wcl-preloader');const wpnonce=thumbnail_downloader_section.querySelector('#wcl_youtube_thumbnail_downloader_wpnonce');const video_wrapper=thumbnail_downloader_section.querySelector('.wcl-video-wrapper');const video_type_wrapper=video_wrapper.querySelector('.wcl-box-row-video');const channel_type_wrapper=video_wrapper.querySelector('.wcl-box-row-channel');let fullhd_thumbnail_link=video_wrapper.querySelectorAll('.wcl-video-fullhd .js-thumbnail-link');fullhd_thumbnail_link.forEach(item=>{item.addEventListener('click',e=>{e.preventDefault()
let channel_url=thumbnail_downloader_section.querySelector('.form-control').value;let videoKey;if(channel_url.indexOf('?v=')!=-1){videoKey=channel_url.split('=')[1].split('&')[0]}else if(channel_url.indexOf('youtu.be/')!=-1){videoKey=channel_url.split('youtu.be/')[1]}
let thumbnail_quality=item.dataset.quality;let thumbnail_link=`/thumbnail-preview/?id=${videoKey}&quality=${thumbnail_quality}`;window.location.href=thumbnail_link})});let banner_download_links=video_wrapper.querySelectorAll('.wcl-video-banner .js-banner-link');banner_download_links.forEach(item=>{item.addEventListener('click',e=>{e.preventDefault()
const video_banner_wrapper=e.target.closest('.wcl-video-banner');let banner_download_url=video_banner_wrapper.querySelector('.video-poster img').src;let banner_download_link=`/banner-download/?link=${encodeURIComponent(banner_download_url)}`;window.location.href=banner_download_link})});thumbnail_downloader_search_form_submit_button.addEventListener('click',e=>{e.preventDefault();message.classList.remove('show','error','success');video_wrapper.style.display='none';video_type_wrapper.style.display='none';channel_type_wrapper.style.display='none';video_type_wrapper.querySelector('.wcl-video-banner').style.display='none';channel_type_wrapper.querySelector('.wcl-video-banner').style.display='none';let channel_url=thumbnail_downloader_section.querySelector('.form-control');if(isEmpty(channel_url.value)){video_wrapper.style.display='none';message.innerHTML=multilanguage_object['Empty URL. Please, fill URL input and click on the "Search" button again'];message.classList.add('show','error');return!1}
addUrlParameterToHistory(channel_url.value);if(channel_url.value.indexOf('/c/')!=-1||channel_url.value.indexOf('/channel/')!=-1||channel_url.value.indexOf('/@')!=-1){let link_type='channel';let page_title=channel_type_wrapper.querySelector('.wcl-channel-share').dataset.page;let current_website_link=encodeURIComponent(document.location.href);let share_twitter=channel_type_wrapper.querySelector('.wcl-channel-share-twitter');share_twitter.href=`http://twitter.com/share?text=${page_title}&url=${current_website_link}`;let share_facebook=channel_type_wrapper.querySelector('.wcl-channel-share-facebook');share_facebook.href=`https://www.facebook.com/sharer/sharer.php?u=${current_website_link}`;let share_linkedin=channel_type_wrapper.querySelector('.wcl-channel-share-linkedin');share_linkedin.href=`https://www.linkedin.com/sharing/share-offsite/?url=${current_website_link}`;let estimate_items=channel_type_wrapper.querySelector('.estimate-items');form.classList.add('loading');preloader.classList.add('loading');const request_args=`&wpnonce=${wpnonce.value}&channel_url=${channel_url.value}&link_type=${link_type}`;SendRequest('youtube_thumbnail_downloader',request_args).then(function(res){let response=JSON.parse(res);if(response.success=='1'){form.classList.remove('loading');preloader.classList.remove('loading');estimate_items.querySelector('.wcl-channel-avatar img').src='';estimate_items.querySelector('.wcl-video-name .name').innerText='';estimate_items.querySelector('.wcl-video-views .number').innerText='';estimate_items.querySelector('.wcl-creation-date .number').innerText='';estimate_items.querySelector('.wcl-country .number').innerText='';const channel_image=response.data.channel_image;const channel_banner=response.data.channel_banner;const channel_name=response.data.channel_name;const total_views=response.data.views;const location=response.data.location;const creation_date=response.data.front_date;if(channel_banner){channel_type_wrapper.querySelector('.wcl-video-banner').style.display='block';channel_type_wrapper.querySelector('.wcl-video-banner .video-poster img').src=channel_banner}else{channel_type_wrapper.querySelector('.wcl-video-banner').style.display='none'}
estimate_items.querySelector('.wcl-channel-avatar img').src=channel_image;estimate_items.querySelector('.wcl-video-name .name').innerText=channel_name;estimate_items.querySelector('.wcl-video-views .number').innerText=numberMask(total_views);estimate_items.querySelector('.wcl-creation-date .number').innerText=creation_date;estimate_items.querySelector('.wcl-country .number').innerText=location;video_wrapper.style.display='block';channel_type_wrapper.style.display='flex';estimate_items.style.display='block'}else{form.classList.remove('loading');preloader.classList.remove('loading');message.innerHTML=response.message?response.message:multilanguage_object['Something went wrong. Please, <a href="%1$s">contact us</a> or try again later'];message.classList.add('show','error')}}).catch(function(err){form.classList.remove('loading');preloader.classList.remove('loading');message.innerHTML=err?err:multilanguage_object['Something went wrong. Please, <a href="%1$s">contact us</a> or try again later'];message.classList.add('show','error')})}else if(channel_url.value.indexOf('?v=')!=-1||channel_url.value.indexOf('youtu.be/')!=-1){let link_type='video';let page_title=video_type_wrapper.querySelector('.wcl-channel-share').dataset.page;let current_website_link=encodeURIComponent(document.location.href);let share_twitter=video_type_wrapper.querySelector('.wcl-channel-share-twitter');share_twitter.href=`http://twitter.com/share?text=${page_title}&url=${current_website_link}`;let share_facebook=video_type_wrapper.querySelector('.wcl-channel-share-facebook');share_facebook.href=`https://www.facebook.com/sharer/sharer.php?u=${current_website_link}`;let share_linkedin=video_type_wrapper.querySelector('.wcl-channel-share-linkedin');share_linkedin.href=`https://www.linkedin.com/sharing/share-offsite/?url=${current_website_link}`;thumbnail_downloader_search_form_submit_button.classList.remove('disable');const estimate_items=video_type_wrapper.querySelector('.estimate-items');const estimate_preloader=video_type_wrapper.querySelector('.estimate-items-preloader');estimate_items.style.display='none';let videoKey;if(channel_url.value.indexOf('?v=')!=-1){videoKey=channel_url.value.split('=')[1].split('&')[0]}else if(channel_url.value.indexOf('youtu.be/')!=-1){videoKey=channel_url.value.split('youtu.be/')[1]}
if(videoKey==undefined){video_wrapper.style.display="none";message.innerHTML=multilanguage_object['Wrong URL. Please, make sure you insert a link to a video on youtube'];message.classList.add('show','error');return!1}
form.classList.add('loading');preloader.classList.add('loading');estimate_preloader.classList.add('loading');let maximum_thumbnail=`https://img.youtube.com/vi/${videoKey}/maxresdefault.jpg`;let fullhd_video_box=video_wrapper.querySelector('.wcl-video-fullhd img');fullhd_video_box.src=maximum_thumbnail;preloader.classList.remove('loading');video_wrapper.style.display='block';video_type_wrapper.style.display='flex';estimate_preloader.classList.add('loading');channel_url=`https://www.youtube.com/watch?v=${videoKey}`;const request_args=`&wpnonce=${wpnonce.value}&channel_url=${channel_url}&link_type=${link_type}`;SendRequest('youtube_thumbnail_downloader',request_args).then(function(res){let response=JSON.parse(res);if(response.success=='1'){form.classList.remove('loading');estimate_preloader.classList.remove('loading');estimate_items.querySelector('.wcl-channel-avatar img').src='';estimate_items.querySelector('.wcl-video-name .name').innerText='';estimate_items.querySelector('.wcl-video-views .number').innerText='';estimate_items.querySelector('.wcl-video-likes .number').innerText='';estimate_items.querySelector('.wcl-video-comments .number').innerText='';estimate_items.querySelector('.wcl-video-length .number').innerText='';const channel_image=response.data.channel_image;const channel_banner=response.data.channel_banner;const video_name=response.data.name;const total_views=response.data.views;const total_like=response.data.like;const total_comments=response.data.comments;const video_length=response.data.time;if(channel_banner){video_type_wrapper.querySelector('.wcl-video-banner').style.display='block';video_type_wrapper.querySelector('.wcl-video-banner .video-poster img').src=channel_banner}else{channel_type_wrapper.querySelector('.wcl-video-banner').style.display='none'}
estimate_items.querySelector('.wcl-channel-avatar img').src=channel_image;estimate_items.querySelector('.wcl-video-name .name').innerText=video_name;estimate_items.querySelector('.wcl-video-views .number').innerText=numberMask(total_views);estimate_items.querySelector('.wcl-video-likes .number').innerText=numberMask(total_like);estimate_items.querySelector('.wcl-video-comments .number').innerText=numberMask(total_comments);estimate_items.querySelector('.wcl-video-length .number').innerText=numberMask(video_length);estimate_items.style.display='block'}else{form.classList.remove('loading');estimate_preloader.classList.remove('loading');message.innerHTML=response.message?response.message:multilanguage_object['Something went wrong. Please, <a href="%1$s">contact us</a> or try again later'];message.classList.add('show','error')}}).catch(function(err){form.classList.remove('loading');estimate_preloader.classList.remove('loading');message.innerHTML=err?err:multilanguage_object['Something went wrong. Please, <a href="%1$s">contact us</a> or try again later'];message.classList.add("show","error")})}else{video_wrapper.style.display='none';message.innerHTML=multilanguage_object['Wrong URL. Please, make sure you insert a link to a video on youtube'];message.classList.add('show','error');return!1}});if(document.querySelector('.form-control').value!=0){thumbnail_downloader_search_form_submit_button.click()}}
const subtitles_downloader_search_form_submit_button=document.querySelector('.section-subtitles-downloader .search-form button[type=submit]');if(subtitles_downloader_search_form_submit_button){const subtitles_downloader_section=subtitles_downloader_search_form_submit_button.closest('.section-subtitles-downloader');const form=subtitles_downloader_section.querySelector('.wcl-form');const message=subtitles_downloader_section.querySelector('.wcl-message ');const preloader=subtitles_downloader_section.querySelector('.wcl-preloader');const wpnonce=subtitles_downloader_section.querySelector('#wcl_youtube_subtitle_downloader_wpnonce');const video_wrapper=subtitles_downloader_section.querySelector('.wcl-video-wrapper');const subtitles_wrapper=video_wrapper.querySelector('.wcl-subtitles-wrapper');const subtitles_result=video_wrapper.querySelector('.wcl-subtitles-wrapper .result');jQuery('body').on('keyup','.wcl-subtitles-wrapper input[type=\'search\']',function(e){let value=jQuery(this).val();let parent=jQuery(this).closest('.wcl-subtitles-wrapper');jQuery.each(parent.find('.video-box'),function(i,v){var text=jQuery(this).find("h3").text();if(text.toLowerCase().indexOf(value.toLowerCase())>-1){jQuery(this).removeClass('d-none')}else{jQuery(this).addClass('d-none')}});e.preventDefault()})
subtitles_downloader_search_form_submit_button.addEventListener('click',e=>{e.preventDefault();message.classList.remove('show','error','success');video_wrapper.style.display='none';subtitles_wrapper.style.display='none';let channel_url=subtitles_downloader_section.querySelector('.form-control');if(isEmpty(channel_url.value)){video_wrapper.style.display='none';message.innerHTML=multilanguage_object['Empty URL. Please, fill URL input and click on the "Search" button again'];message.classList.add('show','error');return!1}
addUrlParameterToHistory(channel_url.value);let page_title=subtitles_wrapper.querySelector('.wcl-channel-share').dataset.page;let current_website_link=encodeURIComponent(document.location.href);let share_twitter=subtitles_wrapper.querySelector('.wcl-channel-share-twitter');share_twitter.href=`http://twitter.com/share?text=${page_title}&url=${current_website_link}`;let share_facebook=subtitles_wrapper.querySelector('.wcl-channel-share-facebook');share_facebook.href=`https://www.facebook.com/sharer/sharer.php?u=${current_website_link}`;let share_linkedin=subtitles_wrapper.querySelector('.wcl-channel-share-linkedin');share_linkedin.href=`https://www.linkedin.com/sharing/share-offsite/?url=${current_website_link}`;subtitles_downloader_search_form_submit_button.classList.remove('disable');if(channel_url.value.indexOf('?v=')!=-1||channel_url.value.indexOf('youtu.be/')!=-1){let estimate_items=subtitles_wrapper.querySelector('.estimate-items');let videoKey;if(channel_url.value.indexOf('?v=')!=-1){videoKey=channel_url.value.split('=')[1].split('&')[0]}else if(channel_url.value.indexOf('youtu.be/')!=-1){videoKey=channel_url.value.split('youtu.be/')[1]}
if(videoKey==undefined){video_wrapper.style.display="none";message.innerHTML=multilanguage_object['Wrong URL. Please, make sure you insert a link to a video on youtube'];message.classList.add('show','error');return!1}
form.classList.add('loading');preloader.classList.add('loading');subtitles_result.innerHTML="";channel_url=`https://www.youtube.com/watch?v=${videoKey}`;const request_args=`&wpnonce=${wpnonce.value}&channel_url=${channel_url}`;SendRequest('youtube_subtitle_downloader',request_args).then(function(res){let response=JSON.parse(res);if(response.success=='1'){form.classList.remove('loading');preloader.classList.remove('loading');if(response.data.subtitles.length<1){video_wrapper.style.display="none";message.innerHTML='Subtitles not found.';message.classList.add('show','error');return!1}
let channel_image=response.data.channel_image;let video_name=response.data.name;let total_views=response.data.views;let total_like=response.data.like;let total_comments=response.data.comments;let video_length=response.data.time;let subtitles=response.data.subtitles;let responseID=response.data.id;let res="";for(let subtitle of subtitles){res+=`
                            <div class="video-box">
                                <div class="box-title">
                                    <h3>${subtitle.name}</h3>
                                    <div class="wcl-button-wrapper">

                                    <div class="dropdown show">
                                        <a href="#" class="btn btn-black" data-toggle="dropdown">
                                            <span class="btn-circle"></span>
                                            <span class="btn-circle"></span>
                                            <span class="btn-circle"></span>
                                            <strong>${multilanguage_object['Download']}</strong>
                                        </a>

                                        <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                                            <a class="dropdown-item" href="/subtitle-download?id=${responseID}&lang=${subtitle.id}&ext=srt">SRT</a>
                                            <a class="dropdown-item" href="/subtitle-download?id=${responseID}&lang=${subtitle.id}&ext=vtt">VTT</a>
                                            <a class="dropdown-item" href="/subtitle-download?id=${responseID}&lang=${subtitle.id}&ext=stl">STL</a>
                                            <a class="dropdown-item" href="/subtitle-download?id=${responseID}&lang=${subtitle.id}&ext=sbv">SBV</a>
                                            <a class="dropdown-item" href="/subtitle-download?id=${responseID}&lang=${subtitle.id}&ext=sub">SUB</a>
                                            <a class="dropdown-item" href="/subtitle-download?id=${responseID}&lang=${subtitle.id}&ext=ass">ASS</a>
                                            <a class="dropdown-item" href="/subtitle-download?id=${responseID}&lang=${subtitle.id}&ext=dfxp">DFXP</a>
                                            <a class="dropdown-item" href="/subtitle-download?id=${responseID}&lang=${subtitle.id}&ext=ttml">TTML</a>
                                            <a class="dropdown-item" href="/subtitle-download?id=${responseID}&lang=${subtitle.id}&ext=txt">TXT</a>
                                        </div>
                                    </div>
                                    </div>
                                </div>
                            </div>
                            `}
subtitles_result.innerHTML=res;estimate_items.querySelector('.wcl-channel-avatar img').src=channel_image;estimate_items.querySelector('.wcl-video-subtitles .number').innerText=numberMask(subtitles.length);estimate_items.querySelector('.wcl-video-name .name').innerText=video_name;estimate_items.querySelector('.wcl-video-views .number').innerText=numberMask(total_views);estimate_items.querySelector('.wcl-video-likes .number').innerText=numberMask(total_like);estimate_items.querySelector('.wcl-video-comments .number').innerText=numberMask(total_comments);estimate_items.querySelector('.wcl-video-length .number').innerText=numberMask(video_length);video_wrapper.style.display='block';subtitles_wrapper.style.display='flex';estimate_items.style.display='block'}else{form.classList.remove('loading');preloader.classList.remove('loading');message.innerHTML=response.message?response.message:multilanguage_object['Something went wrong. Please, <a href="%1$s">contact us</a> or try again later'];message.classList.add('show','error')}}).catch(function(err){console.log('err: ',err);form.classList.remove('loading');preloader.classList.remove('loading');message.innerHTML=err?err:multilanguage_object['Something went wrong. Please, <a href="%1$s">contact us</a> or try again later'];message.classList.add("show","error")})}else{video_wrapper.style.display='none';message.innerHTML=multilanguage_object['Wrong URL. Please, make sure you insert a link to a video on youtube'];message.classList.add('show','error');return!1}});if(document.querySelector('.form-control').value!=0){subtitles_downloader_search_form_submit_button.click()}}
const rank_tracker_search_form_submit_button=document.querySelector('.section-rank-tracker .search-form button[type=submit]');if(rank_tracker_search_form_submit_button){const section=rank_tracker_search_form_submit_button.closest('.section-rank-tracker');const form=section.querySelector('.wcl-form');const video_wrapper=section.querySelector('.wcl-video-wrapper');const message=section.querySelector('.wcl-message ');const preloader=section.querySelector('.wcl-preloader');const wpnonce=section.querySelector('#wcl_youtube_rank_tracker_wpnonce');const results_wrapper=video_wrapper.querySelector('.wcl-rank-result-wrapper .box-results');const chart_wrapper=video_wrapper.querySelector('.chart');const video_type_wrapper=video_wrapper.querySelector('.wcl-box-row-video');jQuery(document).on('click','.wcl-rank-result-wrapper .box-results a.page-link',function(e){let page=jQuery(this).attr('data-page');switch(page){case 'prev':let prev=jQuery(this).closest('.pagination').find('.active').prev().find('.page-link');if(!['prev','next'].includes(prev.attr('data-page'))){prev.click()}
break;case 'next':let next=jQuery(this).closest('.pagination').find('.active').next().find('.page-link');if(!['prev','next'].includes(next.attr('data-page'))){next.click()}
break;default:jQuery('.wcl-rank-result-wrapper .box-results .result').addClass('d-none');jQuery(`.wcl-rank-result-wrapper .box-results .result[data-page='${page}']`).removeClass('d-none');jQuery(this).closest('.pagination').find('.page-item').removeClass('active');jQuery(this).closest('.page-item').addClass('active')}
e.preventDefault()});rank_tracker_search_form_submit_button.addEventListener('click',e=>{e.preventDefault();message.classList.remove('show','error','success');video_wrapper.style.display='none';let search_term=section.querySelector('.form-control[name="search-term"]').value;let region=section.querySelector('.form-control[name="region"]').value;let video_url=section.querySelector('.form-control[name="url"]').value;if(isEmpty(search_term)||isEmpty(region)||isEmpty(video_url)){video_wrapper.style.display='none';message.innerHTML=multilanguage_object['Empty fields. Please, fill URL input and click on the "Search" button again'];message.classList.add('show','error');return!1}
if(video_url.indexOf('?v=')!=-1||video_url.indexOf('youtu.be/')!=-1){let estimate_items=video_type_wrapper.querySelector('.estimate-items');let videoKey;if(video_url.indexOf('?v=')!=-1){videoKey=video_url.split('=')[1].split('&')[0]}else if(video_url.indexOf('youtu.be/')!=-1){videoKey=video_url.split('youtu.be/')[1]}
if(videoKey==undefined){video_wrapper.style.display="none";message.innerHTML=multilanguage_object['Wrong URL. Please, make sure you insert a link to a video on youtube'];message.classList.add('show','error');return!1}
form.classList.add('loading');preloader.classList.add('loading');results_wrapper.innerHTML="";chart_wrapper.innerHTML=`<div class="wcl-rank-chart"></div>`;const request_args=`&wpnonce=${wpnonce.value}&search_term=${search_term}&region=${region}&url=${video_url}`;SendRequest('youtube_rank_tracker',request_args).then(function(res){let response=JSON.parse(res);if(response.success=='1'){form.classList.remove('loading');preloader.classList.remove('loading');if(response.data.results.length<1){video_wrapper.style.display="none";message.innerHTML=multilanguage_object['Our service is temporarily unavailable. Please, try again later'];message.classList.add('show','error');return!1}
video_wrapper.style.display="block";video_type_wrapper.style.display="flex";estimate_items.style.display='block';const data=response.data;const channel_image=data.channel_image;const channel_banner=data.channel_banner;const video_name=data.name;const country=data.country;const published=data.published;const total_views=data.views;const total_like=data.like;const total_comments=data.comments;const video_length=data.time;const locations_length=data.locations;const subtitles_length=data.subtitles;const position=data.position;const results=data.results;let page=1;let active=1;let pos=1;let res='';for(let result of results){if(pos==position){active=page}
let share=encodeURIComponent(`https://www.youtube.com/watch?v=${result.id}`);res+=`
                            <div class="result d-none" data-page="${page}">
                                <div class="pos ${pos==position?'active':''}">
                                <img src="https://img.youtube.com/vi/${result.id}/mqdefault.jpg" />
                                <span>${pos}</span>
                                </div>
                                
                                <a href="https://${window.location.hostname}/tools/youtube-video-analytics/?url=${share}" target="_blank" class="content">
                                <span>${result.title}</span>
                                <span>https://www.youtube.com/watch?v=${result.id}</span>
                                </a>
                            </div>
                            `;if(pos%20==0){page++}
pos++}
results_wrapper.innerHTML=`
                            ${res}
                            <ul class="pagination justify-content-center">
                                <li class="page-item">
                                    <a class="page-link" data-page="prev" href="#"><i class="bi bi-caret-left-fill"></i></a>
                                </li>
                                <li class="page-item active"><a class="page-link" data-page="1" href="#">1</a></li>
                                <li class="page-item"><a class="page-link" data-page="2" href="#">2</a></li>
                                <li class="page-item"><a class="page-link" data-page="3" href="#">3</a></li>
                                <li class="page-item"><a class="page-link" data-page="4" href="#">4</a></li>
                                <li class="page-item"><a class="page-link" data-page="5" href="#">5</a></li>
                                <li class="page-item"><a class="page-link" data-page="6" href="#">6</a></li>
                                <li class="page-item"><a class="page-link" data-page="7" href="#">7</a></li>
                                <li class="page-item"><a class="page-link" data-page="8" href="#">8</a></li>
                                <li class="page-item"><a class="page-link" data-page="9" href="#">9</a></li>
                                <li class="page-item"><a class="page-link" data-page="10" href="#">10</a></li>
                                <li class="page-item">
                                    <a class="page-link" data-page="next" href="#"><i class="bi bi-caret-right-fill"></i></a>
                                </li>
                            </ul>
                        `;if(typeof data.history.x!=="undefined"&&data.history.y.length>0&&typeof ApexCharts!=="undefined"){jQuery(chart_wrapper).removeClass("d-none");var chart=new ApexCharts(document.querySelector(".wcl-rank-chart"),{series:[{name:'Position/Rank',data:data.history.y}],xaxis:{categories:data.history.x},colors:['#ED2024'],chart:{type:'line',height:350},stroke:{curve:'stepline',},dataLabels:{enabled:!1},markers:{hover:{sizeOffset:4}},fontFamily:'Montserrat, sans-serif',});chart.render()}else{jQuery(chart_wrapper).addClass("d-none")}
jQuery(results_wrapper).find(`.page-link[data-page='${active}']`).click();estimate_items.querySelector('.wcl-channel-avatar img').src=channel_image;estimate_items.querySelector('.wcl-video-page .number').innerText="-";estimate_items.querySelector('.wcl-video-position .number').innerText="-";estimate_items.querySelector('.wcl-video-name .name').innerText=video_name;estimate_items.querySelector('.wcl-video-country .number').innerText=country;estimate_items.querySelector('.wcl-video-published-date .number').innerText=published;estimate_items.querySelector('.wcl-video-views .number').innerText=numberMask(total_views);estimate_items.querySelector('.wcl-video-likes .number').innerText=numberMask(total_like);estimate_items.querySelector('.wcl-video-comments .number').innerText=numberMask(total_comments);estimate_items.querySelector('.wcl-video-length .number').innerText=numberMask(video_length);estimate_items.querySelector('.wcl-locations-length .number').innerText=numberMask(locations_length);estimate_items.querySelector('.wcl-subtitles-length .number').innerText=numberMask(subtitles_length);if(position>0){estimate_items.querySelector('.wcl-video-page .number').innerText=active;estimate_items.querySelector('.wcl-video-position .number').innerText=position}}else{form.classList.remove('loading');preloader.classList.remove('loading');message.innerHTML=response.message?response.message:multilanguage_object['Something went wrong. Please, <a href="%1$s">contact us</a> or try again later'];message.classList.add('show','error')}}).catch(function(err){form.classList.remove('loading');preloader.classList.remove('loading');message.innerHTML=err?err:multilanguage_object['Something went wrong. Please, <a href="%1$s">contact us</a> or try again later'];message.classList.add("show","error")})}else{video_wrapper.style.display='none';message.innerHTML=multilanguage_object['Wrong URL. Please, make sure you insert a link to a video on youtube'];message.classList.add('show','error');return!1}})}
const FreeYoutubeServiceForm=document.querySelector('.section-free .wcl-form');if(FreeYoutubeServiceForm){const user_link=FreeYoutubeServiceForm.querySelector('.wcl-video-url');const user_email=FreeYoutubeServiceForm.querySelector('.wcl-email');const form_inputs=FreeYoutubeServiceForm.querySelectorAll('.form-control');const submit_btn=FreeYoutubeServiceForm.querySelector('.wcl-email-subscribers-form-submit');const wpnonce=FreeYoutubeServiceForm.querySelector('#wcl_free_services_wpnonce');const service_type=FreeYoutubeServiceForm.dataset.serviceType
const allow_domains=FreeYoutubeServiceForm.dataset.allowDomains
const message=FreeYoutubeServiceForm.querySelector('.wcl-message');form_inputs.forEach(input=>{input.addEventListener('click',()=>{input.classList.remove('error','success')})});FreeYoutubeServiceForm.addEventListener('submit',e=>{e.preventDefault();message.classList.remove('show','error','success');user_link.classList.remove('error','success')
user_email.classList.remove('error','success');if(user_link_validations(service_type,allow_domains,0,user_link.value)){user_link.classList.add('success')
if(validateEmail(user_email.value)){user_email.classList.add('success')
FreeYoutubeServiceForm.classList.add('loading');const request_args=`&wpnonce=${wpnonce.value}&user_link=${user_link.value}&user_email=${user_email.value}&page_id=${window.free_page_id}`;SendRequest('free_services_send_code',request_args).then(function(res){let response=JSON.parse(res);if(response.success=='1'){submit_btn.style.display='none';user_email.parentElement.style.display='none';user_link.parentElement.style.display='none';setTimeout(function(){FreeYoutubeServiceForm.classList.remove('loading')},30000);const response_user_email=response.user_email;const confirm_mail_input=`
                                <div class="form-group">
                                    <input type="number" class="form-control	wcl-confirm-mail" name="confirm-mail" placeholder="${multilanguage_object['Your verification code']}">
                                </div>
                            `;const confirm_mail_btn=`
                                <button type="button" class="btn btn-black wcl-confirm-mail-btn" disabled>
                                    <span class="btn-circle"></span>
                                    <span class="btn-circle"></span>
                                    <span class="btn-circle"></span>
                                    <strong>${multilanguage_object['Confirm']}</strong>
                                </button>
                            `;let banner_box_element=document.querySelector('.banner-box');let notification_spam=document.createElement('div');notification_spam.className="subtitle-notification";notification_spam.innerHTML=multilanguage_object['Please, make sure to check the "spam" folder too.'];banner_box_element.insertBefore(notification_spam,FreeYoutubeServiceForm);FreeYoutubeServiceForm.insertAdjacentHTML("afterbegin",confirm_mail_btn);FreeYoutubeServiceForm.insertAdjacentHTML("afterbegin",confirm_mail_input);let confirm_mail_input_el=FreeYoutubeServiceForm.querySelector('.wcl-confirm-mail');let confirm_mail_btn_el=FreeYoutubeServiceForm.querySelector('.wcl-confirm-mail-btn');confirm_mail_input_el.addEventListener('input',e=>{message.classList.remove('show','error','success');if(isEmpty(confirm_mail_input.value)){let length=e.target.value.length;if(length==9){confirm_mail_btn_el.disabled=!1}else{confirm_mail_btn_el.disabled=!0}}});confirm_mail_btn_el.addEventListener('click',(e)=>{e.preventDefault();FreeYoutubeServiceForm.classList.add('loading');const request_args=`&wpnonce=${wpnonce.value}&user_email=${response_user_email}&secret_code=${confirm_mail_input_el.value}&page_id=${window.free_page_id}`;SendRequest('free_services_confirm_email',request_args).then(function(res){let response=JSON.parse(res);if(response.success=='1'){FreeYoutubeServiceForm.classList.remove('loading');window.location.href='/free-services-successful-page/'}else{FreeYoutubeServiceForm.classList.remove('loading');message.innerHTML=response.message?response.message:multilanguage_object['Something went wrong. Please, <a href="%1$s">contact us</a> or try again later'];message.classList.add('show','error')}}).catch(function(err){FreeYoutubeServiceForm.classList.remove('loading');message.innerHTML=err?err:multilanguage_object['Something went wrong. Please, <a href="%1$s">contact us</a> or try again later'];message.classList.add('show','error')})})}else{FreeYoutubeServiceForm.classList.remove('loading');message.innerHTML=response.message?response.message:multilanguage_object['Something went wrong. Please, <a href="%1$s">contact us</a> or try again later'];message.classList.add('show','error')}}).catch(function(err){FreeYoutubeServiceForm.classList.remove('loading');message.innerHTML=err?err:multilanguage_object['Something went wrong. Please, <a href="%1$s">contact us</a> or try again later'];message.classList.add('show','error')})}else{user_email.classList.add('error')
message.innerText=multilanguage_object['Please enter a valid email.'];message.classList.add('show','error')}}else{user_link.classList.add('error')
message.innerText=multilanguage_object['Please enter a valid link.'];message.classList.add('show','error')}})}
const niceNumber=(num)=>{if(typeof num!='number'){return!1}
if(num>1000000000){newNum=(num/1000000000).toFixed(2)+'B'}else if(num>1000000){newNum=(num/1000000).toFixed(2)+'M'}else if(num>1000){newNum=(num/1000).toFixed(2)+'k'}else{newNum=num.toFixed(2)}
return newNum}
function calculateTheWords(message){const splitMessage=message.split(" ");const wordsNumber=splitMessage.length;return wordsNumber}
function setBadgeProperties(badgeElement,className,labelText,imagePath){badgeElement.classList.add(className);badgeElement.querySelector('span').innerText=labelText;badgeElement.querySelector('img').src=imagePath}
const videoAnalyticsSubmitButton=document.querySelector('.wcl-section-analytics .search-form button[type=submit]');if(videoAnalyticsSubmitButton){const analyticsSection=videoAnalyticsSubmitButton.closest('.wcl-section-analytics');const analyticsForm=analyticsSection.querySelector('.wcl-form');const contentWrapper=analyticsSection.querySelector('.video-views-box');const wpnonce=analyticsSection.querySelector('#wcl_youtube_video_analytics_wpnonce');const message=analyticsSection.querySelector('.wcl-message ');const preloader=analyticsSection.querySelector('.wcl-preloader');const sidebarPreloader=analyticsSection.querySelector('.wcl-sidebar-preloader');const sidebarVideoCards=analyticsSection.querySelector('.video-cards');videoAnalyticsSubmitButton.addEventListener('click',async(e)=>{e.preventDefault();message.classList.remove('show','error','success');contentWrapper.style.display='none';contentWrapper.querySelector('.wlc-thumbnail').innerHTML='<img src=\'\' />';sidebarVideoCards.style.display='none';let channelUrl=analyticsSection.querySelector('.form-control');if(isEmpty(channelUrl.value)){contentWrapper.style.display='none';message.innerHTML=multilanguage_object['Empty URL. Please, fill URL input and click on the "Search" button again'];message.classList.add('show','error');return!1}
if(channelUrl.value.indexOf('?v=')==-1&&channelUrl.value.indexOf('youtu.be/')==-1){contentWrapper.style.display="none";message.innerHTML=multilanguage_object['Wrong URL. Please, make sure you insert a link to a video on youtube'];message.classList.add('show','error');return!1}
let videoKey;if(channelUrl.value.indexOf('?v=')!=-1){videoKey=channelUrl.value.split('=')[1].split('&')[0]}else if(channelUrl.value.indexOf('youtu.be/')!=-1){videoKey=channelUrl.value.split('youtu.be/')[1]}
if(videoKey==undefined){contentWrapper.style.display="none";message.innerHTML=multilanguage_object['Wrong URL. Please, make sure you insert a link to a video on youtube'];message.classList.add('show','error');return!1}
addUrlParameterToHistory(channelUrl.value);let page_title=analyticsSection.querySelector('.wcl-channel-share').dataset.page;let current_website_link=encodeURIComponent(document.location.href);let share_twitter=analyticsSection.querySelector('.wcl-channel-share-twitter');share_twitter.href=`http://twitter.com/share?text=${page_title}&url=${current_website_link}`;let share_facebook=analyticsSection.querySelector('.wcl-channel-share-facebook');share_facebook.href=`https://www.facebook.com/sharer/sharer.php?u=${current_website_link}`;let share_linkedin=analyticsSection.querySelector('.wcl-channel-share-linkedin');share_linkedin.href=`https://www.linkedin.com/sharing/share-offsite/?url=${current_website_link}`;channelUrl=`https://www.youtube.com/watch?v=${videoKey}`;analyticsForm.classList.add('loading');preloader.classList.add('loading');sidebarPreloader.style.display='flex';const request_args=`&wpnonce=${wpnonce.value}&channel_url=${channelUrl}`;SendRequest('youtube_video_analytics',request_args).then(function(res){let response=JSON.parse(res);if(response.success=='1'){contentWrapper.style.display='flex';analyticsForm.classList.remove('loading');preloader.classList.remove('loading');const data=response.data;if(data.embed){contentWrapper.querySelector('.wlc-thumbnail').innerHTML=data.embed}else{contentWrapper.querySelector('.wlc-thumbnail').src=data.thumbnail||''}
contentWrapper.querySelector('.wcl-video-name').innerText=data.video_name||multilanguage_object.undefined;contentWrapper.querySelector('.channel-avatar img').innerText=data.channel_image||'';contentWrapper.querySelector('.wcl-channel-name').innerText=data.channel_name||multilanguage_object.undefined;contentWrapper.querySelector('.wcl-channel-followers').innerText=data.followers?data.followers+' '+multilanguage_object.Followers:multilanguage_object.undefined;contentWrapper.querySelector('.wcl-channel-videos').innerText=data.channel_video?data.channel_video+' '+multilanguage_object.Videos:multilanguage_object.undefined;contentWrapper.querySelector('.wcl-channel-views').innerText=data.total_views?data.total_views+' '+multilanguage_object.Views:multilanguage_object.undefined;contentWrapper.querySelector('.wcl-created-date').innerText=data.created_date?data.created_date+' '+multilanguage_object.Published:multilanguage_object.undefined;contentWrapper.querySelector('.wcl-created-date').innerText=data.date_now?multilanguage_object['Data updated on']+' '+data.date_now:multilanguage_object.undefined;contentWrapper.querySelector('.wcl-video-views .number').innerText=data.video_views||multilanguage_object.undefined;contentWrapper.querySelector('.wcl-video-comments .number').innerText=data.video_comments||multilanguage_object.undefined;contentWrapper.querySelector('.video-introduction .wcl-video-description').innerText=data.description||multilanguage_object.undefined;if(data.description){if(calculateTheWords(data.description)>=30){contentWrapper.querySelector('.video-introduction .wcl-video-description').classList.add('hidden');contentWrapper.querySelector('.video-introduction .unfold').style.display='flex'}else{contentWrapper.querySelector('.video-introduction .unfold').style.display='none'}}
contentWrapper.querySelector('.wcl-est-video-value .number').innerText='';contentWrapper.querySelector('.wcl-estimated-cpm .number').innerText='';contentWrapper.querySelector('.wcl-est-video-value .cpm-undefined').innerText='';contentWrapper.querySelector('.wcl-estimated-cpm .cpm-undefined').innerText='';(async()=>{let crmList=await(await fetch('/wp-content/themes/views4you_theme/js/crm.json')).json();if(crmList[data.location]){let location_rate=parseFloat(crmList[data.location].replace('$',''));let estVideoValue=niceNumber(location_rate*data.video_views_match);contentWrapper.querySelector('.wcl-est-video-value .number').innerText='$'+estVideoValue;contentWrapper.querySelector('.wcl-estimated-cpm .number').innerText=crmList[data.location]}else{contentWrapper.querySelector('.wcl-est-video-value .cpm-undefined').innerHTML='<p>'+multilanguage_object['We can not calculate Video Value for your country']+'</p>';contentWrapper.querySelector('.wcl-estimated-cpm .cpm-undefined').innerHTML='<p>'+multilanguage_object['We can not defined CPM for your country']+'</p>'}})();if(data.likes_ratio&&data.video_like){contentWrapper.querySelector('.wcl-likes-ratio .number span').innerText=data.likes_ratio+'%';contentWrapper.querySelector('.wcl-likes-ratio .likes_value').innerText=data.video_like}else{contentWrapper.querySelector('.wcl-likes-ratio .number span').innerText=multilanguage_object.undefined;contentWrapper.querySelector('.wcl-likes-ratio .likes_value').innerText=multilanguage_object.undefined}
if(data.views_ratio){contentWrapper.querySelector('.wcl-views-ratio .number span').innerText=data.views_ratio+'%'}else{contentWrapper.querySelector('.wcl-views-ratio .number span').innerText=multilanguage_object.undefined}
let viewsRatio=parseFloat(data.views_ratio.replace(',',''));let badgeElement=contentWrapper.querySelector('.wcl-views-ratio .number .badge');let storeButtons=contentWrapper.querySelector('.wcl-section-analytics .buttons');contentWrapper.querySelector('.wcl-views-ratio .number .badge').className='badge';if(viewsRatio<15){storeButtons.style.display='flex';setBadgeProperties(badgeElement,'badge-red',multilanguage_object.Bad,'/wp-content/themes/views4you_theme/img/icon-smile-bad.svg')}else if(viewsRatio>15&&Number(data.views_ratio)<20){setBadgeProperties(badgeElement,'badge-yellow',multilanguage_object.Avarege,'/wp-content/themes/views4you_theme/img/icon-smile.svg')}else if(viewsRatio>20){setBadgeProperties(badgeElement,'badge-green',multilanguage_object.Good,'/wp-content/themes/views4you_theme/img/icon-smile-perfect.svg')}
let tagsWrapper=contentWrapper.querySelector('.video-tags .tags');tagsWrapper.innerHTML='';let tagsList=data.tags;if(tagsList){let delay=0.5;tagsList.forEach(item=>{tagsWrapper.insertAdjacentHTML("beforeend",`<p class="tag wow fadeInRight" data-wow-duration="1s" data-wow-delay="${delay}s">${item}</p>`);delay+=0.1})}else{tagsWrapper.innerHTML='<p>'+multilanguage_object['No tags found for this video']+'</p>'}
SidebarVideoLoading(data.related)}else{analyticsForm.classList.remove('loading');preloader.classList.remove('loading');message.innerHTML=response.message?response.message:multilanguage_object['Something went wrong. Please, <a href="%1$s">contact us</a> or try again later'];message.classList.add('show','error')}}).catch(function(err){analyticsForm.classList.remove('loading');preloader.classList.remove('loading');message.innerHTML=err?err:multilanguage_object['Something went wrong. Please, <a href="%1$s">contact us</a> or try again later'];message.classList.add('show','error')})});if(document.querySelector('.form-control').value!=0){videoAnalyticsSubmitButton.click()}}
let videoDescriptionWrapper=document.querySelector('.wcl-section-analytics .video-introduction');if(videoDescriptionWrapper){let videoDescription=videoDescriptionWrapper.querySelector('.wcl-video-description');let videoDescriptionShowBtn=videoDescriptionWrapper.querySelector('.unfold');videoDescriptionShowBtn.addEventListener('click',event=>{event.preventDefault();if(videoDescription.classList.contains('hidden')){videoDescription.classList.remove('hidden');videoDescriptionShowBtn.querySelector('span').innerText=multilanguage_object.Fold;videoDescriptionShowBtn.querySelector('img').style.transform='rotate(180deg)'}else{videoDescription.classList.add('hidden');videoDescriptionShowBtn.querySelector('span').innerText=multilanguage_object.Unfold;videoDescriptionShowBtn.querySelector('img').style.transform='rotate(0)'}})}
const SidebarVideoLoading=(url)=>{let analyticsSection=videoAnalyticsSubmitButton.closest('.wcl-section-analytics');let sidebarPreloader=analyticsSection.querySelector('.wcl-sidebar-preloader');let sidebarVideoCards=analyticsSection.querySelector('.video-cards');let sidebarVideoCardsBox=analyticsSection.querySelector('.video-cards-box');let sidebarResponseElement=analyticsSection.querySelector('.wcl-sidebar .wcl-response-text');sidebarVideoCardsBox.innerHTML='';const httpRequest=new XMLHttpRequest();if(!httpRequest){downloader_search_form_submit_button.classList.remove('disable');alert('Giving up :( Cannot create an XMLHTTP instance');return!1}
httpRequest.open('POST','/wp-admin/admin-ajax.php');httpRequest.setRequestHeader('Content-Type','application/x-www-form-urlencoded; charset=UTF-8');httpRequest.onload=()=>{if(httpRequest.status>=200&&httpRequest.status<300){let response=JSON.parse(httpRequest.responseText);sidebarPreloader.style.display='none';sidebarVideoCards.style.display='block';let delay=0.5;response.forEach(item=>{let videoCard=`
			<a href="#" class="video-card wcl-sidebar-video-card wow fadeInUp" data-wow-duration="1s" data-wow-delay="${delay}s" data-link="${item.link}">
			<div class="card-image">
				<img src="${item.thumbnail}" alt="video-card-1">
			</div>
			<h6>${item.video_name}</h6>
			<div class="video-card-info">
				<p><b>${item.channel_name}</b></p>
				<p>${item.followers} ${multilanguage_object['Subs']}</p>
				<p>${item.video_views} ${multilanguage_object['Views']}</p>
				<p>${item.created_date}</p>
			</div>
			<div class="card-footer">
				<div class="badge badge-outline-red">72.55</div>
				<p>
				${multilanguage_object['Engagement rate:']} <span>15.3%</span>
				</p>
			</div>
			</a>
			`;delay+=0.25;sidebarVideoCardsBox.insertAdjacentHTML("beforeend",videoCard)})}else{sidebarResponseElement.innerHTML=multilanguage_object['Something went wrong. Please, try again later'];sidebarResponseElement.style.display='block';sidebarPreloader.style.display='none'}}
httpRequest.onerror=function(){sidebarResponseElement.innerHTML=multilanguage_object['Something went wrong. Please, try again later'];sidebarResponseElement.style.display='block';sidebarPreloader.style.display='none'};httpRequest.send('action=sidebar_video_loading&related='+encodeURIComponent(JSON.stringify(url)))}
document.addEventListener('click',function(event){if(event.target.matches('.wcl-sidebar-video-card')){event.preventDefault();document.querySelector('.form-control').value=event.target.dataset.link;videoAnalyticsSubmitButton.click()}},!1);const copyLinkBtn=document.getElementById('wcl-copy-link-btn');if(copyLinkBtn){copyLinkBtn.addEventListener('click',e=>{e.preventDefault();let dummy=document.createElement('input'),text=window.location.href;document.body.appendChild(dummy);dummy.value=text;dummy.select();document.execCommand('copy');document.body.removeChild(dummy);copyLinkBtn.classList.add('active');setTimeout(()=>{copyLinkBtn.classList.remove('active')},1500)})}
const checkRegionSubmitButton=document.querySelector('.wcl-section-check-region .wcl-form button[type=submit]');if(checkRegionSubmitButton){const checkRegionSection=checkRegionSubmitButton.closest('.wcl-section-check-region');const checkRegionForm=checkRegionSection.querySelector('.wcl-form');const contentWrapper=checkRegionSection.querySelector('.video-views-box');const wpnonce=checkRegionSection.querySelector('#wcl_check_video_region_wpnonce');const message=checkRegionSection.querySelector('.wcl-message ');const preloader=checkRegionSection.querySelector('.wcl-preloader');const ageRestriction=checkRegionSection.querySelector('.age-restriction');const embedChecker=checkRegionSection.querySelector('.embed-checker');jQuery('body').on('keyup','.wcl-country-wrapper input[type=\'search\']',function(e){let value=jQuery(this).val();let parent=jQuery(this).closest('.wcl-country-wrapper');jQuery.each(parent.find('li'),function(i,v){var text=jQuery(this).text();if(text.toLowerCase().indexOf(value.toLowerCase())>-1){jQuery(this).removeClass('d-none')}else{jQuery(this).addClass('d-none')}});e.preventDefault()});checkRegionSubmitButton.addEventListener('click',e=>{e.preventDefault();message.classList.remove('show','error','success');contentWrapper.style.display='none';const channelUrl=checkRegionSection.querySelector('.form-control');if(isEmpty(channelUrl.value)){contentWrapper.style.display='none';message.innerHTML=multilanguage_object['Empty URL. Please, fill URL input and click on the "Search" button again'];message.classList.add('show','error');return!1}
if(channelUrl.value.indexOf('?v=')==-1&&channelUrl.value.indexOf('youtu.be/')==-1){contentWrapper.style.display="none";message.innerHTML=multilanguage_object['Wrong URL. Please, make sure you insert a link to a video on youtube'];message.classList.add('show','error');return!1}
addUrlParameterToHistory(channelUrl.value);let page_title=checkRegionSection.querySelector('.wcl-channel-share').dataset.page;let current_website_link=encodeURIComponent(document.location.href);let share_twitter=checkRegionSection.querySelector('.wcl-channel-share-twitter');share_twitter.href=`http://twitter.com/share?text=${page_title}&url=${current_website_link}`;let share_facebook=checkRegionSection.querySelector('.wcl-channel-share-facebook');share_facebook.href=`https://www.facebook.com/sharer/sharer.php?u=${current_website_link}`;let share_linkedin=checkRegionSection.querySelector('.wcl-channel-share-linkedin');share_linkedin.href=`https://www.linkedin.com/sharing/share-offsite/?url=${current_website_link}`;checkRegionForm.classList.add('loading');preloader.classList.add('loading');const request_args=`&wpnonce=${wpnonce.value}&channel_url=${channelUrl.value}`;SendRequest('check_video_region',request_args).then(function(res){let response=JSON.parse(res);if(response.success=='1'){console.log(response);contentWrapper.style.display='flex';checkRegionForm.classList.remove('loading');preloader.classList.remove('loading');let channel_image=response.data.channel_image||multilanguage_object.undefined;let video_name=response.data.name||multilanguage_object.undefined;let total_views=numberMask(response.data.views)||multilanguage_object.undefined;let total_like=numberMask(response.data.like)||multilanguage_object.undefined;let total_comments=numberMask(response.data.comments)||multilanguage_object.undefined;let video_length=numberMask(response.data.time)||multilanguage_object.undefined;let age_restriction=response.data.age_restriction||multilanguage_object.undefined;let embeddable=response.data.embeddable||multilanguage_object.undefined;let is_embeddable=response.data.is_embeddable||multilanguage_object.undefined;let estimate_items=checkRegionSection.querySelector('.estimate-items');estimate_items.querySelector('.wcl-channel-avatar img').src=channel_image;estimate_items.querySelector('.wcl-video-name .name').innerText=video_name;estimate_items.querySelector('.wcl-video-views .number').innerText=total_views;estimate_items.querySelector('.wcl-video-likes .number').innerText=total_like;estimate_items.querySelector('.wcl-video-comments .number').innerText=total_comments;estimate_items.querySelector('.wcl-video-length .number').innerText=video_length;if(age_restriction=="ytAgeRestricted"){ageRestriction.classList.remove('alert-success');ageRestriction.classList.remove('alert-danger');ageRestriction.innerText='Warning! The video has age restrictions.';ageRestriction.classList.add('alert-danger')}else{ageRestriction.classList.remove('alert-success');ageRestriction.classList.remove('alert-danger');ageRestriction.innerText='The video has no age restrictions.';ageRestriction.classList.add('alert-success')}
embedChecker.classList.remove('alert-success','alert-danger');embedChecker.innerText='';if(embeddable!==null&&is_embeddable!==null){if(embeddable&&is_embeddable==="Yes"){embedChecker.innerText='The video is embeddable.';embedChecker.classList.add('alert-success')}else{embedChecker.innerText='Warning! The video is not embeddable.';embedChecker.classList.add('alert-danger')}}
checkRegionSection.querySelector('#world-map').innerHTML='';if(jQuery('#world-map').length){var options={map:'world_mill',backgroundColor:'white',container:jQuery('#world-map'),regionStyle:{initial:{fill:"#7cbbdd"},stroke:'red'},zoomButtons:!0,series:{regions:[{attribute:'fill'}]}};jQuery('#world-map').vectorMap(options);world_map=jQuery('#world-map').vectorMap('get','mapObject');var allowedArr=[];var blockedArr=[];function gen_colors(codes,allowed){var color_allowed="#cecbca";var color_blocked="#c92159";var colors={};var temp=[];for(var code in world_map.regions){if(codes.indexOf(code)>-1){colors[code]=allowed?color_allowed:color_blocked;if(allowed)
allowedArr.push(world_map.regions[code].config.name);else blockedArr.push(world_map.regions[code].config.name)}else{colors[code]=allowed?color_blocked:color_allowed;if(allowed)
blockedArr.push(world_map.regions[code].config.name);else allowedArr.push(world_map.regions[code].config.name)}
temp.push(code)}
return colors}
if(response.data.available_location.length>0){response.data.available_location.push('XS','XK','XC');colors=gen_colors(response.data.available_location,!0);world_map.series.regions[0].setValues(colors);let allowedCountryWrapper=checkRegionSection.querySelector('.wcl-allowed-country-wrapper ul');let blockedCountryWrapper=checkRegionSection.querySelector('.wcl-blocked-country-wrapper ul');allowedCountryWrapper.innerHTML='';blockedCountryWrapper.innerHTML='';allowedArr.sort().forEach(item=>{allowedCountryWrapper.insertAdjacentHTML("beforeend",`<li>${item}</li>`)});blockedArr.sort().forEach(item=>{blockedCountryWrapper.insertAdjacentHTML("beforeend",`<li>${item}</li>`)})}}}else{checkRegionForm.classList.remove('loading');preloader.classList.remove('loading');message.innerHTML=response.message?response.message:multilanguage_object['Something went wrong. Please, <a href="%1$s">contact us</a> or try again later'];message.classList.add('show','error')}}).catch(function(err){checkRegionForm.classList.remove('loading');preloader.classList.remove('loading');message.innerHTML=err?err:multilanguage_object['Something went wrong. Please, <a href="%1$s">contact us</a> or try again later'];message.classList.add('show','error')})});if(document.querySelector('.form-control').value!=0){checkRegionSubmitButton.click()}}
const YouTubeTitleCreatorButton=document.querySelector('.wcl-title-creator .search-form button[type=submit]');if(YouTubeTitleCreatorButton){let YouTubeTitleCreatorSection=YouTubeTitleCreatorButton.closest('.wcl-title-creator');const videoViewsBox=YouTubeTitleCreatorSection.querySelector('.video-views-box');const form=YouTubeTitleCreatorSection.querySelector('.wcl-form');const message=YouTubeTitleCreatorSection.querySelector('.wcl-message ');const preloader=YouTubeTitleCreatorSection.querySelector('.wcl-preloader');const wpnonce=YouTubeTitleCreatorSection.querySelector('#wcl_youtube_title_creator_wpnonce');YouTubeTitleCreatorButton.addEventListener('click',e=>{e.preventDefault();const videoDescription=YouTubeTitleCreatorSection.querySelector('.search-form .wcl-textarea[name=video-description]').value;const videoSearchTerm=YouTubeTitleCreatorSection.querySelector('.search-form .wcl-input[name=video-search-term]').value;const toneOfVoice=YouTubeTitleCreatorSection.querySelector('.search-form .wcl-select[name=tone-of-voice]').value;message.classList.remove('show','error','success');videoViewsBox.style.display='none';videoViewsBox.querySelector('.results').innerHTML='';if(isEmpty(videoDescription)||isEmpty(videoSearchTerm)){videoViewsBox.style.display='none';message.innerHTML=multilanguage_object['Empty fields. Please, Fill in all fields and click "Create" again'];message.classList.add('show','error');return!1}
form.classList.add('loading');preloader.classList.add('loading');const request_args=`&wpnonce=${wpnonce.value}&video_description=${videoDescription}&search_term=${videoSearchTerm}&tone_of_voice=${toneOfVoice}`;SendRequest('youtube_title_creator',request_args).then(function(res){let response=JSON.parse(res);if(response.success=='1'){form.classList.remove('loading');preloader.classList.remove('loading');let responseData=response.data;videoViewsBox.style.display='flex';preloader.style.display='none';YouTubeTitleCreatorButton.classList.remove('disable');videoViewsBox.querySelector('.box-title h3').innerHTML=`${responseData.length} Results`;let res="";responseData.forEach(item=>{if(typeof item!=="object"){res+=`<p onclick="copyYoutubeTitleCreatorText(this)" class="wcl-create-title-response">${item.replace(/\\/g,'')}</p>`}else{res+=`
                                        <p onclick="copyYoutubeTitleCreatorText(this)" class="wcl-create-title-response">${item}</p>`}});document.querySelector('.title-generator-results').innerHTML=res}else{form.classList.remove('loading');preloader.classList.remove('loading');message.innerHTML=response.message?response.message:multilanguage_object['Something went wrong. Please, <a href="%1$s">contact us</a> or try again later'];message.classList.add('show','error')}}).catch(function(err){form.classList.remove('loading');preloader.classList.remove('loading');message.innerHTML=err?err:multilanguage_object['Something went wrong. Please, <a href="%1$s">contact us</a> or try again later'];message.classList.add('show','error')})})}
const show_header_sub_menu=()=>{let menu_items_has_children=document.querySelectorAll('.header .menu-list .menu-item-has-children');if(window.matchMedia('(min-width: 1024px)').matches){menu_items_has_children.forEach(item=>{item.addEventListener('mouseover',()=>{item.classList.add('show-sub-menu')})
item.addEventListener('mouseout',()=>{item.classList.remove('show-sub-menu')})})}else if(window.matchMedia('(max-width: 1024px)').matches){menu_items_has_children.forEach(item=>{let link=item.querySelector('a');link.addEventListener('click',e=>{e.preventDefault();item.classList.toggle('show-sub-menu')})})}}
show_header_sub_menu();const roas_calc_btn=document.querySelector('.wcl-roas-submit');if(roas_calc_btn){roas_calc_btn.addEventListener('click',e=>{e.preventDefault();document.querySelector('#roas-round').innerText='';document.querySelector('#roas-percent-round').innerText='';document.querySelector('.wcl-roas-calculator .roas-output-unit').style.display='none';document.querySelector('.wcl-roas-calculator .roas-response-text').style.display='none';let total_income=document.querySelector('.wcl-roas-total-income').value;let total_ads=document.querySelector('.wcl-total-ads').value;if(!isEmpty(total_income)&&!isEmpty(total_ads)){let roas=total_income/total_ads;let roas_round=roas.toFixed(2);let roas_percent=roas*100;let roas_percent_round=roas_percent.toFixed(0);document.querySelector('#roas-round').innerText=roas_round;document.querySelector('#roas-percent-round').innerText=roas_percent_round;document.querySelector('.wcl-roas-calculator .roas-output-unit').style.display='inline-block'}else{document.querySelector('.wcl-roas-calculator .roas-response-text').innerText=multilanguage_object['Error. Please enter correct data'];document.querySelector('.wcl-roas-calculator .roas-response-text').style.display='block'}})}
const comment_form=document.querySelector('#commentform');if(comment_form){const submit_btn=comment_form.querySelector('#submit');const is_blog_form=comment_form.classList.contains('blog-comments-form');submit_btn.disabled=!0;function isEmailValid(value){const EMAIL_REGEXP=/^(([^<>()[\].,;:\s@"]+(\.[^<>()[\].,;:\s@"]+)*)|(".+"))@(([^<>()[\].,;:\s@"]+\.)+[^<>()[\].,;:\s@"]{2,})$/iu;return EMAIL_REGEXP.test(value)}
const check_comment_form_field=()=>{let author_input_val=document.querySelector('#commentform #author').value;let email_input_val=document.querySelector('#commentform #email').value;let comment_input_val=document.querySelector('#commentform #comment').value;let rating_input_val=document.querySelector('.acf-field[data-name="rating"] input').value;if(!isEmpty(rating_input_val)&&!isEmpty(author_input_val)&&isEmailValid(email_input_val)&&!isEmpty(comment_input_val)){submit_btn.disabled=!1}else if(is_blog_form&&!isEmpty(author_input_val)&&isEmailValid(email_input_val)&&!isEmpty(comment_input_val)){submit_btn.disabled=!1}else{submit_btn.disabled=!0}}
comment_form.addEventListener('keyup',check_comment_form_field);comment_form.addEventListener('input',check_comment_form_field)}
const product_banner=document.querySelector('.wcl-product-banner')
if(product_banner){const select_product_btns=document.querySelectorAll('.wcl-product-banner .wcl_select_product_btn')
select_product_btns.forEach(btn=>{btn.addEventListener('click',e=>{e.preventDefault()
const parentForm=btn.closest('.wcl-form')
const message=parentForm.querySelector('.wcl-message')
message.classList.remove('show','error','success')
if(parentForm.querySelector('input[name="btnradio"]:checked')){const selected=parentForm.querySelector('input[name="btnradio"]:checked').value;if(selected==='free'){const free_btn=parentForm.querySelector('input[value="free"]');const link=free_btn.dataset.link;window.location.href=link}else{createCookie('wcl_product_id',selected,7);window.location.href=addLanguagePrefix('/get-started/')}}else{message.innerText=multilanguage_object['Please, select a package'];message.classList.add('show','error')}})})}
const package_section=document.querySelector('.wcl-package-section')
if(package_section){const buy_package_btn=package_section.querySelector('.btn')
buy_package_btn.addEventListener('click',e=>{e.preventDefault()
const package_id=buy_package_btn.dataset.id
if(!isEmpty(package_id)){createCookie('wcl_product_id',package_id,7);window.location.href=addLanguagePrefix('/get-started/')}})}
const user_link_validations=(service_type,allow_domains,multi_purchase,input_value)=>{if(service_type==='post'){if(parseInt(multi_purchase)){return!isEmpty(input_value)}
const transform_allow_domains=allow_domains.replace(/\s/g,'').replace(/,/g,'|').replace(/\./g,'\\.')
const URL_REGEXP=new RegExp(`^((?:https?:\/\/)?(?:www\.|m\.)?(${transform_allow_domains})\/\\S+)\\w+`,'i');return URL_REGEXP.test(input_value)}else if(service_type==='account'){return!isEmpty(input_value)}else{return!1}}
const get_started_page=document.querySelector('.wcl-get-account-info');if(get_started_page){eraseCookie('wcl_user_link');eraseCookie('wcl_user_multi_links');eraseCookie('wcl_user_info');eraseCookie('wcl_user_posts');if(readCookie('wcl_user_post_1')){let cookieName='wcl_user_post_'
let postNumber=1;while(readCookie(cookieName+postNumber)){eraseCookie(cookieName+postNumber);postNumber++}}
eraseCookie('wcl_postal_code');eraseCookie('wcl_selected_country');eraseCookie('wcl_cart');eraseCookie('wcl_discount_price');eraseCookie('wcl_coupon');eraseCookie('wcl_viewing_time');eraseCookie('wcl_subscription_license');const form=get_started_page.querySelector('.wcl-form');const form_inputs=get_started_page.querySelectorAll('.form-control');const user_link=get_started_page.querySelector('.form-control[name="username"]');const user_email=get_started_page.querySelector('.form-control[name="email"]');const select_product=get_started_page.querySelector('select.wcl-buy-product-select');const submit_btn=get_started_page.querySelector('.btn[type="button"]');const wpnonce=get_started_page.querySelector('#get_user_link_info_wpnonce');const service_type=form.dataset.serviceType
const allow_domains=form.dataset.allowDomains
const multi_purchase=form.dataset.multi
const message=get_started_page.querySelector('.wcl-message');form_inputs.forEach(input=>{input.addEventListener('click',()=>{input.classList.remove('error','success')})})
submit_btn.addEventListener('click',e=>{e.preventDefault()
message.classList.remove('show','error','success');user_link.classList.remove('error','success')
user_email.classList.remove('error','success');if(user_link_validations(service_type,allow_domains,multi_purchase,user_link.value)){user_link.classList.add('success')
if(validateEmail(user_email.value)){user_email.classList.add('success')
form.classList.add('loading');const product_id=select_product?select_product.value:readCookie('wcl_product_id');createCookie('wcl_user_email',user_email.value,7);createCookie('wcl_user_link',user_link.value,7);createCookie('wcl_product_id',product_id,7);if(select_product&&select_product.classList.contains('wcl-live-stream-product-select')){const viewing_time_select=get_started_page.querySelector('select.wcl-viewing-time-select');createCookie('wcl_viewing_time',viewing_time_select.value,7)}
const request_args=`&wpnonce=${wpnonce.value}&user_link=${user_link.value}&product_id=${product_id}`;SendRequest('get_user_link_info',request_args).then(function(res){let response=JSON.parse(res);if(response.success=='1'){form.classList.remove('loading');if(response.user_info){createCookie('wcl_user_info',JSON.stringify(response.user_info),7)}
if(response.user_posts_info){createCookie('wcl_user_posts',JSON.stringify(response.user_posts_info),7);if(response.post_transfer_type=='multiple'&&response.user_posts){let insta_posts=response.user_posts;let cookie_name='wcl_user_post_';for(let i=1;i<=insta_posts.length;i++){createCookie(cookie_name+i,JSON.stringify(response.user_posts[i-1]))}}}
if(response.redirect_page==='select_post'){window.location.href=addLanguagePrefix('/select-posts/')}else if(response.redirect_page==='checkout'){if(response.package_without_links){if(response.link_type=='channel'){createCookie('wcl_user_info','{"user_link":"'+readCookie('wcl_user_link')+'"}',7);createCookie('wcl_user_multi_links','["$missing_packages_links"]',7)}else if(response.link_type=='video'){createCookie('wcl_user_info','{"account_name":"$missing_packages_links"}',7);createCookie('wcl_user_multi_links','["'+user_link.value+'"]',7)}}
window.location.href=addLanguagePrefix('/checkout/')}}else{form.classList.remove('loading');message.innerHTML=response.message?response.message:multilanguage_object['Something went wrong. Please, <a href="%1$s">contact us</a> or try again later'];message.classList.add('show','error')}}).catch(function(err){form.classList.remove('loading');message.innerHTML=err?err:multilanguage_object['Something went wrong. Please, <a href="%1$s">contact us</a> or try again later'];message.classList.add('show','error')})}else{user_email.classList.add('error')
message.innerText=multilanguage_object['Please enter a valid email.'];message.classList.add('show','error')}}else{user_link.classList.add('error')
message.innerText=multilanguage_object['Please enter a valid link.'];message.classList.add('show','error')}})}
const live_stream_product_select=document.querySelector('.wcl-live-stream-product-select');if(live_stream_product_select){live_stream_product_select.addEventListener('change',e=>{e.preventDefault();const product_select_id=get_started_page.querySelector('select.wcl-buy-product-select');createCookie('wcl_product_id',product_select_id.value,7);document.location.reload()})}
const select_video_page=document.querySelector('.wcl-select-post-page');if(select_video_page){let select_video_form=select_video_page.querySelector('.wcl-select-post-form');select_video_form.addEventListener('change',e=>{let checkbox=e.target.closest('.video-check');check_select_video(checkbox)});const check_select_video=(checkbox)=>{const product_type=select_video_form.dataset.productType
const selected_video_info=select_video_page.querySelector('.wcl-select-post-info .data-video-count');const product_per_video_info=select_video_page.querySelector('.wcl-select-post-info .data-product-count');const item_name=select_video_page.querySelector('.wcl-select-post-info .data-item-name');let selected_video=select_video_page.querySelectorAll('input.video-check:checked');if(product_type==='products'){const min_product_quantity=select_video_form.dataset.minQuantity;let product_quantity=select_video_form.dataset.quantity;let display_name=select_video_form.dataset.displayName;let min_select_video=parseInt(product_quantity)/parseInt(min_product_quantity);if(selected_video.length>min_select_video){checkbox.checked=!1;alert(`${multilanguage_object['You can select a minimum of']} ${min_product_quantity} ${display_name} ${multilanguage_object['per video']}.`)}else if(selected_video.length==0){selected_video_info.innerText=selected_video.length;product_per_video_info.innerText=parseInt(product_quantity);item_name.innerText=item_name.dataset.multipleName}else{selected_video_info.innerText=selected_video.length;product_per_video_info.innerText=Math.floor(parseInt(product_quantity)/parseInt(selected_video.length));if(parseInt(selected_video.length)==1){item_name.innerText=item_name.dataset.singularName}else{item_name.innerText=item_name.dataset.multipleName}}
let all_video=select_video_page.querySelectorAll('input.video-check');all_video.forEach(item=>{if(selected_video.length<=min_select_video){let selected_video_infobox=item.closest('.video-cell').querySelector('.video-info');if(item.checked){selected_video_infobox.style.display='block';selected_video_infobox.innerHTML=`+${Math.floor(parseInt(product_quantity)/parseInt(selected_video.length))} ${display_name}`}else{selected_video_infobox.style.display='none'}}})}else if(product_type==='packages'){const max_items=select_video_form.dataset.maxItems;if(selected_video.length>max_items){checkbox.checked=!1;alert(`${multilanguage_object['You can choose a maximum of']} ${max_items} ${multilanguage_object['items for this package']}`)}else{selected_video_info.innerText=selected_video.length}}
const select_video_btn=select_video_page.querySelector('.wcl-select-post-btn');if(selected_video.length>=1){select_video_btn.disabled=!1}else{select_video_btn.disabled=!0}}
const load_more_post_btn=select_video_page.querySelector('#wcl-load-more-post-btn');const select_post_form=select_video_page.querySelector('.wcl-form');if(load_more_post_btn&&select_post_form){load_more_post_btn.addEventListener('click',e=>{e.preventDefault();load_more_post(select_post_form,load_more_post_btn)})}
const load_more_post=async(form,btn)=>{const message=form.querySelector('.wcl-message');try{const product_service=select_video_form.dataset.productService;const wpnonce=form.querySelector('#wcl_load_more_post_wpnonce');let load_more=btn.dataset.loadMore;let end_cursor=btn.dataset.endCursor;let posts_part=btn.dataset.postsPart;let prev_cursor=btn.dataset.prevCursor;let user_id=btn.dataset.userId;const select_post_wrapper=form.querySelector('.wcl-select-post-wrapper');message.classList.remove('show','error','success');form.classList.add('loading');let request_args=`&wpnonce=${wpnonce.value}&end_cursor=${end_cursor}&posts_part=${posts_part}&prev_cursor=${prev_cursor}`;if(user_id)
request_args+=`&user_id=${user_id}`
SendRequest('load_more_post',request_args).then(function(res){const response=JSON.parse(res);if(response.success=='1'){form.classList.remove('loading');const posts_info=response.user_posts_info;let posts=response.post_transfer_type=='multiple'?response.user_posts:posts_info.user_posts;load_more=posts_info.user_posts_has_more;if(posts.length>0){posts.forEach(item=>{const post_link=item.url;const post_type=item.type;const post_title=item.title;const post_image_url=item.image;const post_duration=item.duration;if(product_service.includes('views')&&(!isEmpty(post_type)&&post_type!=='GraphVideo'&&post_type!=='video')){post_cell=`
										<div class="video-cell">
											<div class="video video-disabled">
												<img src="${post_image_url}">
											</div>
										</div>
									`}else{post_cell=`
									<div class="video-cell">
										<div class="video" data-link="${post_link}">
											<div class="data-img">
												<img src="${post_image_url}">
												<div class="video-info"></div>
											</div>
											<label for="${post_link}">
												<input type="checkbox" name="video" id="${post_link}" class="video-check">
												<span></span>
											</label>

											${post_title?'<h4 class="video-title">'+post_title+'</h4>':''}

										</div>
									</div>
									`}
select_post_wrapper.insertAdjacentHTML("beforeend",post_cell)})}
if(load_more){const end_cursor=posts_info.user_posts_end_cursor;btn.dataset.loadMore=load_more;btn.dataset.endCursor=end_cursor;btn.dataset.postsPart=posts_part=='first'?'latest':'first';if(posts_part=='latest'){btn.dataset.prevCursor=end_cursor}}else{btn.closest('.wcl-btn-wrapper').remove()}}else{form.classList.remove('loading');message.innerHTML=response.message?response.message:multilanguage_object['Something went wrong. Please, <a href="%1$s">contact us</a> or try again later'];message.classList.add('show','error')}}).catch(function(err){form.classList.remove('loading');message.innerHTML=multilanguage_object['Something went wrong. Please, <a href="%1$s">contact us</a> or try again later'];message.classList.add('show','error')})}catch(error){form.classList.remove('loading');message.innerHTML=multilanguage_object['Something went wrong. Please, <a href="%1$s">contact us</a> or try again later'];message.classList.add('show','error')}}
const continue_to_checkout=()=>{let selected_video=select_video_page.querySelectorAll('input.video-check:checked');if(selected_video.length){let multiple_videos=[];selected_video.forEach(item=>{let selected_video_link=item.closest('.video').dataset.link;multiple_videos.push(selected_video_link)});createCookie('wcl_user_multi_links',JSON.stringify(multiple_videos),7);window.location.href=addLanguagePrefix('/checkout/')}else{alert(multilanguage_object['You must select at least one post'])}}
const select_video_btn=select_video_page.querySelector('.wcl-select-post-btn');select_video_btn.addEventListener('click',e=>{e.preventDefault();continue_to_checkout()})}
const card_number_input=document.querySelector('.form-control[name=card-number]');if(card_number_input){const cleave=new Cleave(card_number_input,{creditCard:!0,})}
const payment_page=document.querySelector('.wcl-payment-page');function add_to_cart(cart_item){addToCookieArray('wcl_cart',cart_item,7)}
function remove_from_cart(product_id){let cart=JSON.parse(readCookie('wcl_cart'));let delete_item=cart.find(item=>item.product_id===product_id);if(delete_item){cart.splice(cart.indexOf(delete_item),1)}
createCookie('wcl_cart',JSON.stringify(cart),7)}
function get_total_price(){const cart=JSON.parse(readCookie('wcl_cart'));const prices=cart.map(cart_item=>parseFloat(cart_item.product_price));return prices.reduce((total,price)=>total+price,0).toFixed(2)}
function get_total_price_with_coupon(coupon){total_price=get_total_price();if(coupon.coupon_type==='percentage'){discount_price=total_price-(total_price*coupon.coupon_amount/100)}else if(coupon.coupon_type==='flat'){discount_price=total_price-coupon.coupon_amount}
return discount_price.toFixed(2)}
if(payment_page){const isProductPage=payment_page.classList.contains('wcl-payment-product-page');const order_box=payment_page.querySelector('.order-box');const payment_form_btn=payment_page.querySelector('.wcl-payment-form .btn');const product_id=readCookie('wcl_product_id');const user_email=readCookie('wcl_user_email');const user_link=readCookie('wcl_user_multi_links')?JSON.parse(readCookie('wcl_user_multi_links')):readCookie('wcl_user_link');const purchase_type=readCookie('wcl_user_multi_links')?'multi':'single';const product_price=order_box.dataset.productPrice;const license_duration=readCookie('wcl_subscription_license');const queryString=window.location.search;const urlParams=new URLSearchParams(queryString);const session_id=urlParams.get('cko-session-id');const payment_id=urlParams.get('cko-payment-id');if(!session_id&&!payment_id){eraseCookie('wcl_cart');eraseCookie('wcl_discount_price');eraseCookie('wcl_coupon');console.log('After If');if(!isEmpty(product_id)&&!isEmpty(user_link)){let cart_item={product_id:product_id,user_email:user_email,user_link:user_link,purchase_type:purchase_type,product_price:product_price,}
console.log('Create Cart');add_to_cart(cart_item)}else if(!isEmpty(license_duration)){console.log('License')}else{window.location.href=addLanguagePrefix('/');console.log('Go Home')}}
if(isProductPage){const country_offer=payment_page.querySelector('.block-add.wcl-country-offer');if(country_offer){const country_offer_btn=payment_page.querySelector('.block-add.wcl-country-offer .btn');country_offer_btn.addEventListener('click',e=>{e.preventDefault();const country_offer_code=country_offer.dataset.country;const country_offer_price=country_offer.dataset.price;const cart=JSON.parse(readCookie('wcl_cart'));const product=cart.find(product=>product.product_id===product_id);if(country_offer.classList.contains('active')){country_offer_btn.innerText=`+ $${country_offer_price}`;country_offer.classList.remove('active');delete product.country_offer;product.product_price=parseFloat(product.product_price)-parseFloat(country_offer_price)}else{country_offer_btn.innerText=multilanguage_object.Remove;country_offer.classList.add('active');product.country_offer=country_offer_code;product.product_price=parseFloat(product.product_price)+parseFloat(country_offer_price)}
createCookie('wcl_cart',JSON.stringify(cart),1);total_pay=get_total_price();const coupon=JSON.parse(readCookie('wcl_coupon'))
let discount_price=null
if(coupon){discount_price=get_total_price_with_coupon(coupon)
const discount_product_price=document.querySelector('.wcl-product-discount-price');discount_product_price.innerText=`${Views4YouConfig.money_symbol}${discount_price} `}
const product_price_box=payment_page.querySelector('.wcl-product-price');product_price_box.innerText=`${Views4YouConfig.money_symbol}${total_pay}`;payment_form_btn.innerText=discount_price?`${multilanguage_object['Pay']} ${Views4YouConfig.money_symbol}${discount_price}`:`${Views4YouConfig.money_symbol}${multilanguage_object['Pay']} ${total_pay}`})}
const upsale_offers=payment_page.querySelectorAll('.block-add.wcl-upsale-offer');upsale_offers.forEach(upsale=>{const upsale_offer_btn=upsale.querySelector('.block-add .btn');upsale_offer_btn.addEventListener('click',e=>{e.preventDefault();const upsale_offer=e.target.closest('.wcl-upsale-offer');const upsale_product_id=upsale_offer.dataset.id;const upsale_product_quantity=upsale_offer.dataset.quantity;const upsale_product_price=upsale_offer.dataset.price;if(upsale_offer.classList.contains('active')){upsale_offer_btn.innerText=`+ ${Views4YouConfig.money_symbol}${upsale_product_price}`;upsale_offer.classList.remove('active');remove_from_cart(upsale_product_id)}else{upsale_offer_btn.innerText=multilanguage_object.Remove;upsale_offer.classList.add('active');let upsale_cart_item={product_id:upsale_product_id,user_email:user_email,user_link:user_link,purchase_type:purchase_type,product_price:upsale_product_price,}
add_to_cart(upsale_cart_item)}
total_pay=get_total_price();const coupon=JSON.parse(readCookie('wcl_coupon'))
let discount_price=null
if(coupon){discount_price=get_total_price_with_coupon(coupon)
const discount_product_price=document.querySelector('.wcl-product-discount-price');discount_product_price.innerText=`${Views4YouConfig.money_symbol}${discount_price}`}
const product_price_box=payment_page.querySelector('.wcl-product-price');product_price_box.innerText=`${Views4YouConfig.money_symbol}${total_pay}`;payment_form_btn.innerText=discount_price?`${multilanguage_object['Pay']} ${Views4YouConfig.money_symbol}${discount_price}`:`${multilanguage_object['Pay']} ${Views4YouConfig.money_symbol}${total_pay}`})})}
const coupon_block=payment_page.querySelector('.block-add.wcl-coupon')
if(coupon_block){const coupon_block_field=coupon_block.querySelector('input')
const coupon_block_btn=coupon_block.querySelector('button.btn')
const order_box_form=payment_page.querySelector('.order-box.wcl-form')
const total_pay_block=payment_page.querySelector('.order-box.wcl-form .total-pay')
const payment_form_btn=payment_page.querySelector('.wcl-payment-form .btn');const message=order_box_form.querySelector('.wcl-message')
const wpnonce=order_box_form.querySelector('#wcl_coupon_wpnonce');coupon_block_btn.addEventListener('click',e=>{e.preventDefault()
message.classList.remove('show','error','success');if(!isEmpty(coupon_block_field.value)){order_box_form.classList.add('loading');const request_args=`&wpnonce=${wpnonce.value}&coupon_value=${coupon_block_field.value}`;SendRequest('сheck_coupon',request_args).then(function(res){let response=JSON.parse(res);if(response.success=='1'){order_box_form.classList.remove('loading');coupon_block_field.value=''
const coupon={coupon_type:response.coupon_type,coupon_amount:response.coupon_amount,coupon_code:response.coupon_code,}
createCookie('wcl_coupon',JSON.stringify(coupon),7);let total_price='';if(isProductPage){total_price=get_total_price()}else{total_price=response.license_price}
total_pay_block.innerHTML=`
							<span>${multilanguage_object['Total to pay']}</span> <span class="wcl-product-price wcl-product-old-price">
								${Views4YouConfig.money_symbol}${total_price}
							</span>
							<span class="wcl-product-price wcl-product-discount-price">
								${Views4YouConfig.money_symbol}${response.new_price.toFixed(2)}
							</span>
							`;payment_form_btn.innerText=`${multilanguage_object['Pay']} ${Views4YouConfig.money_symbol}${response.new_price.toFixed(2)}`}else{order_box_form.classList.remove('loading');message.innerHTML=response.message?response.message:multilanguage_object['Something went wrong. Please, <a href="%1$s">contact us</a> or try again later'];message.classList.add('show','error')}}).catch(function(err){order_box_form.classList.remove('loading');message.innerHTML=err?err:multilanguage_object['Something went wrong. Please, <a href="%1$s">contact us</a> or try again later'];message.classList.add('show','error')})}else{message.innerText=multilanguage_object['Please enter the code to continue'];message.classList.add('show','error')}})}}
const checkout_form=document.querySelector('#wcl-checkout-form');if(checkout_form){checkout_form.addEventListener('submit',async function(e){e.preventDefault();const section=document.querySelector('.wcl-payment-page');const checkout_box=document.querySelector('.wcl-payment-page .checkout-box');const form_response_element=document.querySelector('.wcl-payment-page .wcl-form-response');const message=document.querySelector('.wcl-message');const payment_type=section.classList.contains('wcl-payment-product-page')?'product':'license';const user_email=checkout_box.querySelector('.form-control[name="user-email"]');if(payment_type==='license'){if(validateEmail(user_email.value)){user_email.classList.remove('error');user_email.classList.add('success');createCookie('wcl_user_email',user_email.value,7)}else{user_email.classList.add('error');message.innerText=multilanguage_object['Please enter a valid email.'];message.classList.add('show','error');return!1}}
checkout_box.classList.add('wcl-checking-payment');form_response_element.innerHTML='';form_response_element.style.display='none';const wpnonce=checkout_form.querySelector('#wcl_checkout_form_wpnonce');let request_args=`&wpnonce=${wpnonce.value}`;let paymentRequest=(args)=>{SendRequest('checkout_payment',args).then(function(res){let response=JSON.parse(res);if(response.success=='1'){if(response.hosted_payment_id)
createCookie('wcl_hosted_payment_id',response.hosted_payment_id,7);location.href=response.payment_redirect}else{window.scrollTo(0,0);checkout_box.classList.remove('wcl-checking-payment');form_response_element.innerHTML=response.message?response.message:multilanguage_object['Something went wrong. Please, <a href="%1$s">contact us</a> or try again later'];form_response_element.classList.add('error');form_response_element.style.display='block'}}).catch(function(err){window.scrollTo(0,0);checkout_box.classList.remove('wcl-checking-payment');form_response_element.innerHTML=err?err:multilanguage_object['Something went wrong. Please, <a href="%1$s">contact us</a> or try again later'];form_response_element.classList.add('error');form_response_element.style.display='block'})}
if(checkout_form.querySelector('#cardholder-name')){const card_name=checkout_form.querySelector('#cardholder-name').value;const selected_country=checkout_form.querySelector('select.wcl-buy-product-country-select').value;const postal_code=checkout_form.querySelector('.wcl-buy-product-postal-code').value;createCookie('wcl_selected_country',selected_country,7);createCookie('wcl_postal_code',postal_code,7);if(checkout_form.querySelector(".card-number-frame")){Frames.enableSubmitForm();Frames.cardholder={name:card_name,billingAddress:{zip:postal_code}}
Frames.submitCard().then((data)=>{request_args+=`&card_token=${data.token}&postal_code=${postal_code}`;paymentRequest(request_args)})}else{const card_number=checkout_form.querySelector('#card-number').value.replace(/\s/g,'');const card_month=checkout_form.querySelector('#card-month').value;const card_year=checkout_form.querySelector('#card-year').value;const card_cvv=checkout_form.querySelector('#cvv').value;request_args+=`&card_name=${card_name}&card_number=${card_number}&card_month=${card_month}&card_year=${card_year}&card_cvv=${card_cvv}&postal_code=${postal_code}`;paymentRequest(request_args)}}else{paymentRequest(request_args)}});const check_payment_status=document.querySelector('#wcl-checkout-check-payment');if(check_payment_status){const session_id=check_payment_status.dataset.id;check_payment_status_function(session_id)}
const check_payment_hosted_status=document.querySelector('#wcl-checkout-check-hosted-payment');if(check_payment_hosted_status){const session_id=check_payment_hosted_status.dataset.id;check_payment_status_function(session_id)}
async function check_payment_status_function(session_id=''){const section=document.querySelector('.wcl-payment-page');const form_response_element=document.querySelector('.wcl-payment-page .wcl-form-response');const checkout_box=document.querySelector('.wcl-payment-page .checkout-box');const wpnonce=checkout_form.querySelector('#wcl_checkout_form_wpnonce');if(session_id==''){window.scrollTo(0,0);checkout_box.classList.remove('wcl-checking-payment');form_response_element.classList.add('error');form_response_element.innerHTML=multilanguage_object['Sorry, we were not able to check your payment. Please, <a href="%1$s">contact us</a> if you were charged or try again later.'];form_response_element.style.display='block';return}
const payment_type=section.classList.contains('wcl-payment-product-page')?'product':'license';const action=payment_type==='product'?'create_order':'create_download_license';let request_args=`&wpnonce=${wpnonce.value}&session_id=${session_id}`;SendRequest(action,request_args).then(function(res){let response=JSON.parse(res);if(response.success=='1'){if(response.tracking_id){if(payment_type==='product'){eraseCookie('wcl_product_id');eraseCookie('wcl_user_link');eraseCookie('wcl_user_multi_links');eraseCookie('wcl_user_info');eraseCookie('wcl_user_posts');if(readCookie('wcl_user_post_1')){let cookieName='wcl_user_post_'
let postNumber=1;while(readCookie(cookieName+postNumber)){eraseCookie(cookieName+postNumber);postNumber++}}
eraseCookie('wcl_cart');eraseCookie('wcl_coupon')}else{eraseCookie('wcl_subscription_license')}
window.location.href=addLanguagePrefix('/order-successful/?tracking_id='+response.tracking_id)}else{window.scrollTo(0,0);checkout_box.classList.remove('wcl-checking-payment');form_response_element.innerHTML=response.message?response.message:multilanguage_object['Something went wrong. Please, <a href="%1$s">contact us</a> or try again later'];form_response_element.classList.add('error');form_response_element.style.display='block'}}else{window.scrollTo(0,0);checkout_box.classList.remove('wcl-checking-payment');form_response_element.innerHTML=response.message?response.message:multilanguage_object['Something went wrong. Please, <a href="%1$s">contact us</a> or try again later'];form_response_element.classList.add('error');form_response_element.style.display='block'}}).catch(function(err){window.scrollTo(0,0);checkout_box.classList.remove('wcl-checking-payment');form_response_element.innerHTML=err?err:multilanguage_object['Something went wrong. Please, <a href="%1$s">contact us</a> or try again later'];form_response_element.classList.add('error');form_response_element.style.display='block'})}}
const crypto_payment_btn=document.querySelector('.wcl-payment-page .wcl-crypto-payment .btn');if(crypto_payment_btn){crypto_payment_btn.addEventListener('click',e=>{e.preventDefault();const checkout_box=document.querySelector('.wcl-payment-page .checkout-box');const form_response_element=document.querySelector('.wcl-payment-page .wcl-form-response');const user_email=checkout_box.querySelector('.form-control[name="user-email"]');const message=document.querySelector('.wcl-message');message.classList.remove('show');const section=document.querySelector('.wcl-payment-page');const payment_type=section.classList.contains('wcl-payment-product-page')?'product':'license';const action=payment_type==='product'?'crypto_payment':'crypto_payment_license';const wpnonce=document.querySelector('#wcl_checkout_form_wpnonce');if(payment_type==='license'){if(validateEmail(user_email.value)){user_email.classList.remove('error');user_email.classList.add('success');createCookie('wcl_user_email',user_email.value,7)}else{user_email.classList.add('error');message.innerText=multilanguage_object['Please enter a valid email.'];message.classList.add('show','error');return!1}}
checkout_box.classList.add('wcl-checking-payment');form_response_element.innerHTML='';form_response_element.style.display='none';let request_args=`&wpnonce=${wpnonce.value}`;SendRequest(action,request_args).then(function(res){let response=JSON.parse(res);if(response.success=='1'){if(response.tracking_id&&response.hosted_url){if(payment_type==='product'){eraseCookie('wcl_product_id');eraseCookie('wcl_user_link');eraseCookie('wcl_user_multi_links');eraseCookie('wcl_user_info');eraseCookie('wcl_user_posts');if(readCookie('wcl_user_post_1')){let cookieName='wcl_user_post_'
let postNumber=1;while(readCookie(cookieName+postNumber)){eraseCookie(cookieName+postNumber);postNumber++}}
eraseCookie('wcl_cart');eraseCookie('wcl_coupon')}else{eraseCookie('wcl_subscription_license')}
window.location.href=response.hosted_url}else{window.scrollTo(0,0);checkout_box.classList.remove('wcl-checking-payment');form_response_element.classList.add('success');form_response_element.innerHTML=response.message;form_response_element.style.display='block'}}else{window.scrollTo(0,0);checkout_box.classList.remove('wcl-checking-payment');form_response_element.classList.add('error');form_response_element.innerHTML=multilanguage_object['Something went wrong. Please, <a href="%1$s">contact us</a> or try again later'];form_response_element.style.display='block'}}).catch(function(err){window.scrollTo(0,0);checkout_box.classList.remove('wcl-checking-payment');form_response_element.classList.add('error');form_response_element.innerHTML=`${multilanguage_object['Error']}: ${err}`;form_response_element.style.display='block'})})}
order_track=document.querySelector('.wcl-order-track');if(order_track){const tracking_id=order_track.querySelector('input[name=order-number]');const user_email=order_track.querySelector('input[name=given-email]');const order_track_btn=order_track.querySelector('.wcl-order-track-form .btn');const order_steps=document.querySelector('.wcl-order-steps');const order_number=order_steps.querySelector('.wcl-order-number');const order_info_block=order_steps.querySelector('.wcl-order-info');const order_deadline=order_steps.querySelector('.wcl-order-deadline');const step_order_quantity=order_steps.querySelector('.wcl-step-order-quantity');const preloader=order_track.querySelector('.wcl-preloader');const error_message=order_track.querySelector('.wcl-error-message');let order_track_btn_disabled;function onInputEmpty(){if(!isEmpty(tracking_id.value)){tracking_id.style.borderColor='#98d098'}else{tracking_id.style.borderColor='#f3cbce'}}
function isEmailValid(value){const EMAIL_REGEXP=/^(([^<>()[\].,;:\s@"]+(\.[^<>()[\].,;:\s@"]+)*)|(".+"))@(([^<>()[\].,;:\s@"]+\.)+[^<>()[\].,;:\s@"]{2,})$/iu;return EMAIL_REGEXP.test(value)}
function onInputEmail(){if(isEmailValid(user_email.value)){user_email.style.borderColor='#98d098'}else{user_email.style.borderColor='#f3cbce'}}
tracking_id.addEventListener('input',onInputEmpty);user_email.addEventListener('input',onInputEmail);order_track.querySelectorAll('.form-control').forEach(item=>{item.addEventListener('input',(event)=>{if(!isEmpty(tracking_id.value)&&isEmailValid(user_email.value)){user_email.style.borderColor='#98d098';tracking_id.style.borderColor='#98d098';order_track_btn_disabled=!0}else{user_email.style.borderColor='#f3cbce';tracking_id.style.borderColor='#f3cbce';order_track_btn_disabled=!1}})});order_track_btn.addEventListener('click',async function(e){e.preventDefault();if(!isEmpty(tracking_id.value)&&isEmailValid(user_email.value)){user_email.style.borderColor='#98d098';tracking_id.style.borderColor='#98d098';order_track_btn_disabled=!0}else{user_email.style.borderColor='#f3cbce';tracking_id.style.borderColor='#f3cbce';order_track_btn_disabled=!1}
error_message.innerHTML='';error_message.style.display='none';order_steps.style.display='none';if(order_track_btn_disabled){let wpnonce=document.querySelector('#wcl_order_track_wpnonce')
preloader.style.display='flex';let request_args=`&wpnonce=${wpnonce.value}&tracking_id=${tracking_id.value}&user_email=${user_email.value}`;SendRequest('order_track',request_args).then(function(res){preloader.style.display='none';let response=JSON.parse(res);if(response.success=='1'){const order_num=response.tracking_id;const order_items=JSON.parse(response.orders);const order_deadline_date=response.deadline;const order_completed=response.status;let order_html='';order_items.forEach(order=>{let order_status=order.order_status;if(order_status==="canceled"||order_status==="partial"){order_status="<b style='color: #ed2024;'>Please contact with us</b>"}
order_html+=`
                                <p class="wow fadeInUp" data-wow-duration="1s" data-wow-delay="0.25s">
                                    ${order.order_quantity} ${order.order_service} - ${order_status}
                                </p>
                             `});order_number.innerHTML=order_num;order_deadline.innerHTML=order_deadline_date;order_info_block.innerHTML=order_html;if(order_completed){step_order_quantity.classList.add('step-done')}else{step_order_quantity.classList.remove('step-done')}
preloader.style.display='none';order_steps.style.display='block'}else{error_message.innerHTML=response.message;error_message.style.display='block'}}).catch(function(err){preloader.style.display='none';error_message.innerHTML=err||multilanguage_object['Something went wrong. Please, try again later'];error_message.style.display='block'})}else{error_message.innerHTML=multilanguage_object['Something went wrong. Please, try again later'];error_message.style.display='block'}})}
version_history_unfold=document.querySelector('.wcl-version-history-tools .js-unfold');if(version_history_unfold){version_history_unfold.addEventListener('click',function(e){e.preventDefault();let wrapper=this.closest('.wcl-version-history-tools');if(wrapper.classList.contains('active')){wrapper.classList.remove('active')}else{wrapper.classList.add('active')}})}
let yoast_question_list=document.querySelectorAll('.schema-faq-section .schema-faq-question');if(yoast_question_list.length){yoast_question_list.forEach(question=>{question.addEventListener('click',e=>{e.preventDefault();question.closest('.schema-faq-section').classList.toggle('active')})})}
const affwp_modal_btn_list=document.querySelectorAll('a[href="#affiliate-register-modal"]');if(affwp_modal_btn_list.length>0){const affwp_modal=document.getElementById('wcl-affiliate-register-modal');const affwp_modal_close_btn=affwp_modal.querySelector('.wcl-modal-close');affwp_modal_btn_list.forEach(btn=>{btn.addEventListener('click',e=>{e.preventDefault();affwp_modal.classList.add('active');disableScroll()})});const close_modal=(modal)=>{modal.classList.remove('active');enableScroll()}
affwp_modal_close_btn.addEventListener('click',e=>{e.preventDefault();close_modal(affwp_modal)});affwp_modal.addEventListener('click',e=>{const target=e.target;if(target.classList.contains('wcl-modal')){close_modal(affwp_modal)}})}
const affwp_tabs=document.querySelector('.affwp-tabs');if(affwp_tabs){let tab_nav=affwp_tabs.querySelector('.affwp-tab-nav');let tab_nav_el=affwp_tabs.querySelectorAll('.affwp-tab-link');let tab_content=affwp_tabs.querySelector('.affwp-tab-content');let tab_content_el=affwp_tabs.querySelectorAll('.affwp-tab-panel');for(let i=0;i<tab_nav_el.length;i++){tab_nav_el[i].addEventListener('click',function(){tab_nav.querySelector('.active').classList.remove('active');tab_nav_el[i].classList.add('active');tab_content.querySelector('.active').classList.remove('active');tab_content_el[i].classList.add('active')})}}
const reset_password_form=document.querySelector('.wcl-reset-password-form');if(reset_password_form){function isEmailValid(value){const EMAIL_REGEXP=/^(([^<>()[\].,;:\s@"]+(\.[^<>()[\].,;:\s@"]+)*)|(".+"))@(([^<>()[\].,;:\s@"]+\.)+[^<>()[\].,;:\s@"]{2,})$/iu;return EMAIL_REGEXP.test(value)}
let user_email=reset_password_form.querySelector('#your-email');const wpnonce=reset_password_form.querySelector('#wcl_reset_password_wpnonce');const submit_btn=reset_password_form.querySelector('.btn');const message=reset_password_form.querySelector('.wcl-message');submit_btn.addEventListener('click',e=>{e.preventDefault()
message.classList.remove('show','error','success');user_email.classList.remove('error');if(isEmailValid(user_email.value)){reset_password_form.classList.add('loading');let request_args=`& wpnonce=${wpnonce.value}& login_email=${user_email.value} `;SendRequest('custom_reset_password',request_args).then(function(res){reset_password_form.classList.remove('loading');let response=JSON.parse(res);if(response.success=='1'){message.innerText=multilanguage_object['A password recovery link has been sent to your email'];message.classList.add('show','success')}else{message.innerHTML=response.message;message.classList.add('show','error')}}).catch(function(err){reset_password_form.classList.remove('loading');message.innerText=multilanguage_object['Something went wrong. Please, try again later'];message.classList.add('show','error')})}else{message.innerText=multilanguage_object['Please insert a valid email address'];message.classList.add('show','error')}})}
const set_new_password_form=document.querySelector('.wcl-set-new-password-form');if(set_new_password_form){let user_key=set_new_password_form.querySelector('#user_key');let user_login=set_new_password_form.querySelector('#user_login');let user_password=set_new_password_form.querySelector('#your-new-password');const wpnonce=set_new_password_form.querySelector('#wcl_set_new_password_wpnonce');const submit_btn=set_new_password_form.querySelector('.btn');const message=set_new_password_form.querySelector('.wcl-message');submit_btn.addEventListener('click',e=>{e.preventDefault()
message.classList.remove('show','error','success');user_password.classList.remove('error');if(user_password.value.length>7){set_new_password_form.classList.add('loading');let request_args=`& wpnonce=${wpnonce.value}& user_key=${user_key.value}& user_login=${user_login.value}& user_password=${user_password.value} `;SendRequest('set_new_password',request_args).then(function(res){set_new_password_form.classList.remove('loading');let response=JSON.parse(res);if(response.success=='1'){message.innerHTML=response.message;message.classList.add('show','success')}else{message.innerText=response.message;message.classList.add('show','error')}}).catch(function(err){set_new_password_form.classList.remove('loading');message.innerText=multilanguage_object['Something went wrong. Please, try again later'];message.classList.add('show','error')})}else{message.innerText=multilanguage_object['Password minimum length is 8'];message.classList.add('show','error');user_password.classList.add('error')}})}
function validateInputLength(el,length){return(el.value.length>=length)}
function authenticationFormsValidation(fields){if(!fields)
return;let isValid=!0;let messages=[];let passwordValue='';fields.forEach(el=>{switch(el.name){case 'name':case 'username':if(!validateInputLength(el,3)){isValid=!1;messages[el.name]=el.name.charAt(0).toUpperCase()+el.name.slice(1)+' '+multilanguage_object['is too short.'];console.log(multilanguage_object)}
break;case 'email':if(!validateEmail(el.value)){isValid=!1;messages.email=multilanguage_object['Email entered incorrectly.']}
case 'password':passwordValue=el.value;if(!validateInputLength(el,7)){isValid=!1;messages.password=multilanguage_object['Password is too short.']}
break;case 'confirm_password':if(!validateInputLength(el,7)){isValid=!1;messages.confirm_password=multilanguage_object['Password is too short.']}
if(el.value!==passwordValue){isValid=!1;if(messages.confirm_password){messages.confirm_password=messages.confirm_password+' '+multilanguage_object['Password mismatch.']}else{messages.confirm_password=multilanguage_object['Password mismatch.']}}
break;case 'terms_policy':if(!el.checked){isValid=!1;messages.terms_policy=multilanguage_object['You must agree to the Terms of Use and Privacy Policy to continue.']}
break}});return{isValid:isValid,messages:messages}}
const loginForm=document.querySelector('#wcl-login-form');if(loginForm){const submitBtn=loginForm.querySelector('.data-submit-btn');submitBtn.addEventListener('click',function(e){let inputs=loginForm.querySelectorAll('input:not([type="hidden"])');let validationData=authenticationFormsValidation(inputs);let messages=validationData.messages;let error=loginForm.querySelector('.wcl-form-error');error.innerText='';if(messages){for(let key in messages){if(messages.hasOwnProperty(key)){let input=loginForm.querySelector('input[name="'+key+'"]');let message=document.createElement('div');message.classList.add('form-control-error');message.textContent=messages[key];if(!input.nextElementSibling||!input.nextElementSibling.classList.contains('form-control-error')){input.insertAdjacentElement('afterend',message);input.classList.add('error')}}}}
inputs.forEach(el=>{const keys=Object.keys(messages);if(!keys.includes(el.name)){el.classList.remove('error');if(el.nextElementSibling&&el.nextElementSibling.classList.contains('form-control-error')){el.nextElementSibling.remove()}}});if(validationData.isValid){loginForm.classList.add('loading');let username=loginForm.querySelector('input[name="username"]').value;let password=loginForm.querySelector('input[name="password"]').value;let wpnonce=loginForm.querySelector('#wcl_login_form_nonce').value;let request_args=`&wpnonce=${wpnonce}&username=${username}&password=${password}`;SendRequest('login_authentication',request_args).then(function(res){loginForm.classList.remove('loading');let response=JSON.parse(res);if(response.success=='1'){location.reload()}else{if(response.message){error.innerText=response.message}}}).catch(function(err){loginForm.classList.remove('loading');error.innerText=multilanguage_object['Something went wrong. Please, try again later']})}})}
const registerForm=document.querySelector('#wcl-register-form');if(registerForm){const submitBtn=registerForm.querySelector('.data-submit-btn');submitBtn.addEventListener('click',function(e){let inputs=registerForm.querySelectorAll('input:not([type="hidden"])');let validationData=authenticationFormsValidation(inputs);let messages=validationData.messages;let error=registerForm.querySelector('.wcl-form-error');error.innerText='';if(messages){for(let key in messages){if(messages.hasOwnProperty(key)){let input=registerForm.querySelector('input[name="'+key+'"]');let message=document.createElement('div');message.classList.add('form-control-error');message.textContent=messages[key];if(!input.nextElementSibling||!input.nextElementSibling.classList.contains('form-control-error')){input.insertAdjacentElement('afterend',message);input.classList.add('error')}}}}
inputs.forEach(el=>{const keys=Object.keys(messages);if(!keys.includes(el.name)){el.classList.remove('error');if(el.nextElementSibling&&el.nextElementSibling.classList.contains('form-control-error')){el.nextElementSibling.remove()}}});if(validationData.isValid){registerForm.classList.add('loading');let name=registerForm.querySelector('input[name="name"]').value;let username=registerForm.querySelector('input[name="username"]').value;let email=registerForm.querySelector('input[name="email"]').value;let password=registerForm.querySelector('input[name="password"]').value;let wpnonce=registerForm.querySelector('#wcl_register_form_nonce').value;let request_args=`&wpnonce=${wpnonce}&name=${name}&username=${username}&email=${email}&password=${password}`;SendRequest('register_authentication',request_args).then(function(res){registerForm.classList.remove('loading');let response=JSON.parse(res);if(response.success=='1'){location.reload()}else{if(response.message){error.innerText=response.message}}}).catch(function(err){loginForm.classList.remove('loading');error.innerText=multilanguage_object['Something went wrong. Please, try again later']})}})}
const setNewPasswordForm=document.querySelector('.wcl-set-new-password-form');if(setNewPasswordForm){let userKey=setNewPasswordForm.querySelector('#user_key').value;let userLogin=setNewPasswordForm.querySelector('#user_login').value;let userPassword=setNewPasswordForm.querySelector('#your-new-password').value;let wpnonce=setNewPasswordForm.querySelector('#wcl_set_new_password_wpnonce').value;let submitBtn=setNewPasswordForm.querySelector('.btn');let message=setNewPasswordForm.querySelector('.wcl-message');submitBtn.addEventListener('click',function(e){e.preventDefault();message.classList.remove('show','error','success');userPassword.classList.remove('error');if(userPassword.value.length>7){setNewPasswordForm.classList.add('loading');let request_args=`&wpnonce=${wpnonce}&user_key=${userKey}&user_login=${userLogin}&user_password=userPassword`;SendRequest('set_new_password',request_args).then(function(res){setNewPasswordForm.classList.remove('loading');let response=JSON.parse(res);if(response.success=='1'){message.innerHTML=response.message;message.classList.add('show','success')}else{message.innerText=response.message;message.classList.add('show','error')}}).catch(function(err){setNewPasswordForm.classList.remove('loading');message.innerText=multilanguage_object['Something went wrong. Please, try again later']})}else{message.innerText=multilanguage_object['Password minimum length is 8'];message.classList.add('show','error');userPassword.classList.add('error')}})}
const platform_slider_section=document.querySelector('.wcl-platform-slider')
if(platform_slider_section){const platform_items=document.querySelectorAll('.wcl-platform-slider .platform-item');const platform_items_btn=document.querySelectorAll('.wcl-platform-slider .platform-item .data-button');const window_width=window.innerWidth;if(window_width<992){platform_items_btn.forEach(item=>{item.addEventListener('click',e=>{e.preventDefault()
e._isClick=!0
const current_platform=item.closest('.platform-item')
if(current_platform.classList.contains('active')){current_platform.classList.remove('active')}else{platform_items.forEach(item=>{item.classList.remove('active')})
current_platform.classList.add('active')}})})}
document.addEventListener('click',function(e){if(e._isClick==!0||e.target.parentNode?.classList.contains('.platform-item'))return
platform_items.forEach(item=>{item.classList.remove('active')})},!1)}
const discount_modal=document.getElementById('wcl-holiday-discount-modal');const show_discount_modal=(modal)=>{modal.classList.add('active');disableScroll()}
if(discount_modal){let last_shown_time=readCookie('discount_modal_last_shown_time');if(!last_shown_time){setTimeout(show_discount_modal(discount_modal),10000);createCookie('discount_modal_last_shown_time',new Date().getTime(),7)}else{let current_time=new Date().getTime();time_elapsed=current_time-last_shown_time;if(time_elapsed>=3600000){setTimeout(show_discount_modal(discount_modal),10000);createCookie('discount_modal_last_shown_time',new Date().getTime(),7)}}
discount_modal.addEventListener('click',()=>{discount_modal.classList.remove('active');enableScroll()})}
const blogSwiper=new Swiper('.blog-slider',{direction:'vertical',loop:!1,autoHeight:!0,slidesPerView:1,margin:20,pagination:{el:'.swiper-pagination',clickable:!0,},});const loadMorePosts=async(wpnonce,page,posts_per_page=null,categories=null,search=null,authorID=null)=>{let request_args=`&wpnonce=${wpnonce}&page=${parseInt(page)+1}`;request_args+=posts_per_page?`&posts_per_page=${posts_per_page}`:'';request_args+=categories?`&categories=${categories}`:'';request_args+=search?`&search=${search}`:'';request_args+=authorID?`&author_id=${authorID}`:'';try{const res=await SendRequest('load_more_blog_post',request_args);return res}catch(error){throw error}}
const authorPostsSection=document.querySelector('.wcl-author-posts-section');if(authorPostsSection){const searchBlock=authorPostsSection.querySelector('.js-author-search');const searchField=authorPostsSection.querySelector('.js-author-search input');const contentWrapper=authorPostsSection.querySelector('.data-content');const form=authorPostsSection.querySelector('.wcl-form');const message=authorPostsSection.querySelector('.wcl-message');const wpnonce=authorPostsSection.querySelector('#author_page_wpnonce');const wpnonceLoadPosts=authorPostsSection.querySelector('#load_more_wpnonce');const loadMoreBtn=authorPostsSection.querySelector('.wcl-load-more');const authorID=authorPostsSection.dataset.author;searchField.addEventListener('keydown',e=>{if(e.keyCode===13){message.classList.remove('show','error','success');loadMoreBtn.classList.add('hide');loadMoreBtn.dataset.page=1;let pageNum=loadMoreBtn.dataset.page;contentWrapper.innerHTML='';searchBlock.classList.add('loading');form.classList.add('loading');let request_args=`&wpnonce=${wpnonce.value}&author_id=${authorID}&search=${searchField.value}`;SendRequest('search_author_post',request_args).then(function(res){let response=JSON.parse(res);if(response.success=='1'){searchBlock.classList.remove('loading');form.classList.remove('loading');contentWrapper.insertAdjacentHTML("beforeend",response.data);pageNum++;if(pageNum<response.max_num_pages){loadMoreBtn.dataset.page=pageNum;loadMoreBtn.classList.remove('hide')}else{loadMoreBtn.classList.add('hide')}}else{searchBlock.classList.remove('loading');form.classList.remove('loading');message.innerHTML=response.message;message.classList.add('show','error')}}).catch(function(err){searchBlock.classList.remove('loading');form.classList.remove('loading');message.innerHTML=multilanguage_object['Something went wrong. Please, <a href="%1$s">contact us</a> or try again later'];message.classList.add('show','error')})}});if(loadMoreBtn){loadMoreBtn.addEventListener('click',async e=>{e.preventDefault();let pageNum=loadMoreBtn.dataset.page;message.classList.remove('show','error','success');searchBlock.classList.add('loading');form.classList.add('loading');loadMoreBtn.classList.add('hide');try{const res=await loadMorePosts(wpnonceLoadPosts.value,pageNum,null,null,searchField.value,authorID);let response=JSON.parse(res);if(response.success=='1'){searchBlock.classList.remove('loading');form.classList.remove('loading');contentWrapper.insertAdjacentHTML("beforeend",response.data);pageNum++;if(pageNum<response.max_num_pages){loadMoreBtn.dataset.page=pageNum;loadMoreBtn.classList.remove('hide')}else{loadMoreBtn.classList.add('hide')}}else{searchBlock.classList.remove('loading');form.classList.remove('loading');message.innerHTML=response.message;message.classList.add('show','error')}}catch(error){searchBlock.classList.remove('loading');form.classList.remove('loading');message.innerHTML=multilanguage_object['Something went wrong. Please, <a href="%1$s">contact us</a> or try again later'];message.classList.add('show','error')}})}}
const postsSections=document.querySelectorAll('.wcl-section-blog-posts');if(postsSections.length>0){postsSections.forEach(section=>{const contentWrapper=section.querySelector('.blog-posts');const form=section.querySelector('.wcl-form');const message=section.querySelector('.wcl-message');const wpnonce=section.querySelector('#load_more_wpnonce');const loadMoreBtn=section.querySelector('.wcl-load-more');const categoriesArr=section.dataset.categories;if(loadMoreBtn){loadMoreBtn.addEventListener('click',async e=>{e.preventDefault();let pageNum=loadMoreBtn.dataset.page;message.classList.remove('show','error','success');form.classList.add('loading');loadMoreBtn.classList.add('hide');try{const res=await loadMorePosts(wpnonce.value,pageNum,3,categoriesArr);let response=JSON.parse(res);if(response.success=='1'){form.classList.remove('loading');contentWrapper.insertAdjacentHTML("beforeend",response.data);pageNum++;if(pageNum<response.max_num_pages){loadMoreBtn.dataset.page=pageNum;loadMoreBtn.classList.remove('hide')}else{loadMoreBtn.classList.add('hide')}}else{form.classList.remove('loading');message.innerHTML=response.message;message.classList.add('show','error')}}catch(error){form.classList.remove('loading');message.innerHTML=multilanguage_object['Something went wrong. Please, <a href="%1$s">contact us</a> or try again later'];message.classList.add('show','error')}})}})}
document.addEventListener('click',e=>{if(e.target.matches('.wcl-save-post')){e.preventDefault();const postItem=e.target.closest('.js-post-item');const postID=postItem.dataset.postId;e.target.classList.toggle('data-save-button--active')
if(!readCookie('wcl_favorite_posts')){createCookie('wcl_favorite_posts','["'+postID+'"]',180)}else{let value=readCookie('wcl_favorite_posts');if(!value.includes(postID)){addToCookieArray('wcl_favorite_posts',postID)}else{let idsArray=JSON.parse(value);let index=idsArray.indexOf(postID);if(index>-1){idsArray.splice(index,1);createCookie('wcl_favorite_posts',JSON.stringify(idsArray),180)}}}}},!1);const likesForm=document.querySelectorAll('.wcl-likes');if(likesForm.length>0){likesForm.forEach(form=>{const postID=form.getAttribute('data-id');const wpnonce=form.querySelector('#post_likes_wpnonce');const likeCount=form.querySelector('.data-number');try{if(!readCookie('wcl_liked_posts')){createCookie('wcl_liked_posts','[]',180)}}catch(err){console.error(err)}
function getAboutLike(id){let hasLike=!1;try{hasLike=JSON.parse(readCookie('wcl_liked_posts')).includes(id)}catch(err){console.error(err)}
return hasLike}
let hasLike=getAboutLike(postID);if(hasLike){form.classList.add('liked')}
form.addEventListener('submit',e=>{e.preventDefault();let hasLike=getAboutLike(postID);form.classList.add('loading');let todo=hasLike?'minus':'plus';let request_args=`&wpnonce=${wpnonce.value}&post_id=${postID}&todo=${todo}`;SendRequest('post_likes',request_args).then(function(res){let response=JSON.parse(res);if(response.success=='1'){form.classList.remove('loading');likeCount.innerText=response.new_likes;form.classList.toggle('liked');if(!readCookie('wcl_liked_posts')){createCookie('wcl_liked_posts','["'+postID+'"]',180)}else{let value=readCookie('wcl_liked_posts');if(!value.includes(postID)){addToCookieArray('wcl_liked_posts',postID)}else{let idsArray=JSON.parse(value);let index=idsArray.indexOf(postID);if(index>-1){idsArray.splice(index,1);createCookie('wcl_liked_posts',JSON.stringify(idsArray),180)}}}}else{form.classList.remove('loading')}}).catch(function(err){form.classList.remove('loading')})})})}
const fontSizeTransformWraps=document.querySelectorAll('.font-size-transform');if(fontSizeTransformWraps.length>0){const contentSelector=fontSizeTransformWraps[0].dataset.selector;const blogContent=document.querySelector(contentSelector);const blogContentH2=blogContent.querySelectorAll('h2');const blogContentH3=blogContent.querySelectorAll('h3');const stepSize=4;fontSizeTransformWraps.forEach(function(elem){const fontSizeTransformWrap=elem;const buttonPlus=fontSizeTransformWrap.querySelector('.data-button--plus');const buttonMinus=fontSizeTransformWrap.querySelector('.data-button--minus');buttonPlus.addEventListener('click',function(event){let contentFontSize=getComputedFontSize(blogContent);if(contentFontSize<50){blogContent.style.fontSize=contentFontSize+stepSize+'px';blogContent.style.lineHeight=getComputedFontSize(blogContent)*1.778+'px';if(blogContentH2.length>0){blogContentH2.forEach(h2=>{h2.style.fontSize=getComputedFontSize(h2)+stepSize+'px';h2.style.lineHeight=getComputedFontSize(h2)*1.25+'px'})}
if(blogContentH3.length>0){blogContentH3.forEach(h3=>{h3.style.fontSize=getComputedFontSize(h3)+stepSize+'px';h3.style.lineHeight=getComputedFontSize(h3)*1.333+'px'})}}});buttonMinus.addEventListener('click',function(event){let contentFontSize=parseInt(window.getComputedStyle(blogContent,null).getPropertyValue('font-size').replace('px',''));if(contentFontSize>10){blogContent.style.fontSize=contentFontSize-stepSize+'px';blogContent.style.lineHeight=getComputedFontSize(blogContent)*1.778+'px';if(blogContentH2.length>0){blogContentH2.forEach(h2=>{h2.style.fontSize=getComputedFontSize(h2)-stepSize+'px';h2.style.lineHeight=getComputedFontSize(h2)*1.25+'px'})}
if(blogContentH3.length>0){blogContentH3.forEach(h3=>{h3.style.fontSize=getComputedFontSize(h3)-stepSize+'px';h3.style.lineHeight=getComputedFontSize(h3)*1.333+'px'})}}})})}
function getComputedFontSize(el){return parseInt(window.getComputedStyle(el,null).getPropertyValue('font-size').replace('px',''))}
const embed_videos=document.querySelectorAll('.js-embed-video');if(embed_videos.length>=1){embed_videos.forEach(video=>{video.addEventListener('click',function(){removeVideoFrame();this.classList.add('active')
const iframe=this.querySelector('.wcl-video-iframe')
if(iframe){iframe.innerHTML=iframe.getAttribute('data-video')}})})}
function removeVideoFrame(){const items=document.querySelectorAll('[data-video]');items.forEach(element=>{if(element.querySelector('iframe')){element.querySelector('iframe').remove()}})}
const insta_bot=document.querySelector('.section-insta-bot')
if(insta_bot){eraseCookie('wcl_product_id');eraseCookie('wcl_user_link');eraseCookie('wcl_user_multi_links');eraseCookie('wcl_user_info');eraseCookie('wcl_user_posts');if(readCookie('wcl_user_post_1')){let cookieName='wcl_user_post_'
let postNumber=1;while(readCookie(cookieName+postNumber)){eraseCookie(cookieName+postNumber);postNumber++}}
eraseCookie('wcl_postal_code');eraseCookie('wcl_selected_country');eraseCookie('wcl_cart');eraseCookie('wcl_discount_price');eraseCookie('wcl_coupon');eraseCookie('wcl_viewing_time');eraseCookie('wcl_subscription_license');const select_license_btns=document.querySelectorAll('.section-insta-bot .wcl_select_license_btn');select_license_btns.forEach(btn=>{btn.addEventListener('click',e=>{e.preventDefault();const parentForm=btn.closest('.wcl-form');const message=parentForm.querySelector('.wcl-message');message.classList.remove('show','error','success');if(parentForm.querySelector('input[name="btnradio"]:checked')){const name=parentForm.dataset.name;const selected=parentForm.querySelector('input[name="btnradio"]:checked').value;const page_id=parentForm.dataset.pageId;const subscription_license=`{"name":"${name}","amount":${selected},"page_id":${page_id}}`;if(readCookie('wcl_product_id')!==null){eraseCookie('wcl_product_id')}
if(readCookie('wcl_subscription_license')!==null){eraseCookie('wcl_subscription_license')}
createCookie('wcl_subscription_license',subscription_license,7);window.location.href=addLanguagePrefix('/checkout/')}else{message.innerText=multilanguage_object['Please, select a package'];message.classList.add('show','error')}})})}
const hamburgerMenuItem=document.querySelector('.header-nav .hamburger-item');if(hamburgerMenuItem){const hamburgerButton=hamburgerMenuItem.querySelector('.data-button');let mobileMediaQuery=window.matchMedia('(min-width: 1024px)');if(mobileMediaQuery.matches){hamburgerButton.addEventListener('click',function(event){hamburgerMenuItem.classList.toggle('hamburger-item--active')})}}
const commentsBox=document.querySelector('.comments-box');if(commentsBox){const comments=commentsBox.querySelectorAll('.comment-item');comments.forEach(comment=>{const commentBody=comment.querySelector('.data-body');if(commentBody.scrollHeight>commentBody.clientHeight+16)
comment.querySelector('.reply').insertAdjacentHTML('beforebegin','<a href="#" class="data-read-more">'+multilanguage_object['Read more']+'</a>')});commentsBox.addEventListener('click',function(event){if(event.target.classList.contains('data-read-more')){event.preventDefault();const commentBody=event.target.parentNode.previousElementSibling;if(!commentBody.classList.contains('data-body--opened')){event.target.innerHTML=multilanguage_object['Show less']}else{event.target.innerHTML=multilanguage_object['Read more']}
commentBody.classList.toggle('data-body--opened')}})}
const InstaCountCheckerButton=document.querySelector('.wcl-insta-follower-count .search-form button[type=submit]');if(InstaCountCheckerButton){let InstaCountCheckerSection=InstaCountCheckerButton.closest('.wcl-insta-follower-count');const profileCard=InstaCountCheckerSection.querySelector('.profile-card');const form=InstaCountCheckerSection.querySelector('.wcl-form');const message=InstaCountCheckerSection.querySelector('.wcl-message ');const preloader=InstaCountCheckerSection.querySelector('.wcl-preloader');const wpnonce=InstaCountCheckerSection.querySelector('#wcl_insta_follower_count_checker_wpnonce');const nameElement=document.querySelector('.text-data .name');const jobElement=document.querySelector('.text-data .job');const postsElement=document.querySelectorAll('.analytics .data')[0].querySelector('.number span');const followersElement=document.querySelectorAll('.analytics .data')[1].querySelector('.number span');const followingElement=document.querySelectorAll('.analytics .data')[2].querySelector('.number span');const profileImgElement=document.querySelector('.profile-img');InstaCountCheckerButton.addEventListener('click',e=>{e.preventDefault();const InstaCountUrl=InstaCountCheckerSection.querySelector('.wcl-insta-counter-username').value;message.classList.remove('show','error','success');profileCard.style.display='none';if(isEmpty(InstaCountUrl)){profileCard.style.display='none';message.innerHTML=multilanguage_object['Empty fields. Please, Fill in all fields and click "Create" again'];message.classList.add('show','error');return!1}
form.classList.add('loading');preloader.classList.add('loading');preloader.style.display='inherit';const request_args=`&wpnonce=${wpnonce.value}&instagram_url=${InstaCountUrl}`;SendRequest('wcl_insta_follower_count_checker',request_args).then(function(res){let response=JSON.parse(res);let userData=response.data;let userInfo=userData?userData.user_info:null;if(response.success){if(userInfo){form.classList.remove('loading');preloader.classList.remove('loading');nameElement.textContent=userInfo.account_name;jobElement.textContent=userInfo.user_bio;postsElement.textContent=userInfo.media_count;followersElement.textContent=userInfo.user_counts;followingElement.textContent=userInfo.following_counts;profileImgElement.src=userInfo.user_image;profileCard.style.display='flex';preloader.style.display='none';InstaCountCheckerButton.classList.remove('disable')}else{form.classList.remove('loading');preloader.classList.remove('loading');preloader.style.display='none';message.innerHTML=multilanguage_object['Instagram username is invalid. Please try a different username.'];message.classList.add('show','error')}}else{form.classList.remove('loading');preloader.classList.remove('loading');message.innerHTML=response.message?response.message:multilanguage_object['Something went wrong. Please, <a href="%1$s">contact us</a> or try again later'];message.classList.add('show','error')}}).catch(function(err){form.classList.remove('loading');preloader.classList.remove('loading');message.innerHTML=err?err:multilanguage_object['Something went wrong. Please, <a href="%1$s">contact us</a> or try again later'];message.classList.add('show','error')})})}
const InstaPictureSizeButton=document.querySelector('.wcl-insta-profile-picture-size .search-form button[type=submit]');if(InstaPictureSizeButton){let InstaPictureSizeSection=InstaPictureSizeButton.closest('.wcl-insta-profile-picture-size');const profileCard=InstaPictureSizeSection.querySelector('.wcl-profile-card');const form=InstaPictureSizeSection.querySelector('.wcl-form');const message=InstaPictureSizeSection.querySelector('.wcl-message ');const preloader=InstaPictureSizeSection.querySelector('.wcl-preloader');const wpnonce=InstaPictureSizeSection.querySelector('#wcl_insta_profile_picture_size_wpnonce');const postsElement=document.querySelectorAll('.data-analytics .data-number')[0].querySelector('span');const followersElement=document.querySelectorAll('.data-analytics .data-number')[1].querySelector('span');const followingElement=document.querySelectorAll('.data-analytics .data-number')[2].querySelector('span');const profileImgElement=document.querySelector('.data-profile-img');InstaPictureSizeButton.addEventListener('click',e=>{e.preventDefault();const InstaCountUrl=InstaPictureSizeSection.querySelector('.wcl-insta-counter-username').value;message.classList.remove('show','error','success');profileCard.style.display='none';profileImgElement.src='';if(isEmpty(InstaCountUrl)){profileCard.style.display='none';message.innerHTML=multilanguage_object['Empty fields. Please, Fill in all fields and click "Create" again'];message.classList.add('show','error');return!1}
form.classList.add('loading');preloader.classList.add('loading');preloader.style.display='inherit';const request_args=`&wpnonce=${wpnonce.value}&instagram_url=${InstaCountUrl}`;SendRequest('wcl_insta_profile_picture_size',request_args).then(function(res){let response=JSON.parse(res);let userData=response.data;let userInfo=userData?userData.user_info:null;if(response.success){if(userInfo){form.classList.remove('loading');preloader.classList.remove('loading');postsElement.textContent=userInfo.media_count;followersElement.textContent=userInfo.user_counts;followingElement.textContent=userInfo.following_counts;profileImgElement.src=userInfo.user_image;profileCard.style.display='block';preloader.style.display='none';InstaPictureSizeButton.classList.remove('disable')}else{form.classList.remove('loading');preloader.classList.remove('loading');preloader.style.display='none';message.innerHTML=multilanguage_object['Instagram username is invalid. Please try a different username.'];message.classList.add('show','error')}}else{form.classList.remove('loading');preloader.classList.remove('loading');message.innerHTML=response.message?response.message:multilanguage_object['Something went wrong. Please, <a href="%1$s">contact us</a> or try again later'];message.classList.add('show','error')}}).catch(function(err){form.classList.remove('loading');preloader.classList.remove('loading');message.innerHTML=err?err:multilanguage_object['Something went wrong. Please, <a href="%1$s">contact us</a> or try again later'];message.classList.add('show','error')})})}
const customChat=document.getElementById('customChat');const livechatFaq=document.getElementById('livechat-faq');if(customChat){customChat.addEventListener('click',function(event){customChat.classList.add('d-none');if(!event.target.closest('.close'))
livechatFaq.classList.remove('d-none')})}
if(livechatFaq){const faqItems=livechatFaq.querySelectorAll('.faq-item');const prevButton=livechatFaq.querySelector('.new-box-prev');closeFaqBox(livechatFaq,customChat);clickFaqItem(faqItems,prevButton);clickPrevFaqButton(prevButton,faqItems);clickDecisionButtons(livechatFaq);function closeFaqBox(faqBox,customChat){const closeButton=faqBox.querySelector('.new-box-close');closeButton.addEventListener('click',function(event){faqBox.classList.add('d-none');customChat.classList.remove('d-none')})}
function clickFaqItem(items,btn){items.forEach(item=>{item.addEventListener('click',function(event){const currentLevel=item.dataset.level;const question=item.querySelector(':scope > .faq-question');const answer=item.querySelector(':scope > .faq-answer');const otherItems=getOtherElements(item.parentNode.querySelectorAll(':scope > .faq-item'),item);if(currentLevel!=='0')
item.parentNode.parentNode.classList.remove('faq-item--active');item.classList.add('faq-item--active');otherItems.forEach(function(otherItem){otherItem.classList.add('d-none')});question.classList.add('d-none');answer.classList.remove('d-none');btn.classList.remove('d-none');event.stopPropagation()})})}
function clickPrevFaqButton(btn,items){btn.addEventListener('click',function(event){const activeItem=Array.from(items).find(item=>item.classList.contains('faq-item--active'));const currentLevel=activeItem.dataset.level;const question=activeItem.querySelector(':scope > .faq-question');const answer=activeItem.querySelector(':scope > .faq-answer');const otherItems=getOtherElements(activeItem.parentNode.querySelectorAll(':scope > .faq-item'),activeItem);otherItems.forEach(function(otherItem){otherItem.classList.remove('d-none')});question.classList.remove('d-none');answer.classList.add('d-none');activeItem.classList.remove('faq-item--active');if(currentLevel!=='0'){activeItem.parentNode.parentNode.classList.add('faq-item--active')}else{btn.classList.add('d-none')}})}
function clickDecisionButtons(faqBox){const yesBtns=faqBox.querySelectorAll('.faq-decision-button--yes');const noBtns=faqBox.querySelectorAll('.faq-decision-button--no');yesBtns.forEach(btn=>{btn.addEventListener('click',function(event){faqBox.classList.add('d-none');document.querySelector('#chat-widget-container').classList.add('chat-widget-visible')})});noBtns.forEach(btn=>{btn.addEventListener('click',function(event){faqBox.classList.add('d-none')})})}}
function getOtherElements(elements,element){const allElements=Array.from(elements);const otherElements=allElements.filter(function(e){return e!==element});return otherElements}})